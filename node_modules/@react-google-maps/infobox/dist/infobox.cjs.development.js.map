{"version":3,"file":"infobox.cjs.development.js","sources":["../src/InfoBox.tsx"],"sourcesContent":["/* global google */\n/* eslint-disable filenames/match-regex */\nimport { InfoBoxOptions } from './types'\n\nexport class InfoBox {\n  content: string | Node\n  disableAutoPan: boolean\n  maxWidth: number\n  pixelOffset: google.maps.Size\n  position: google.maps.LatLng\n  zIndex: number | undefined | null\n  boxClass: string\n  boxStyle: {\n    [key: string]: any\n  }\n  closeBoxMargin: string\n  closeBoxURL: string\n  infoBoxClearance: google.maps.Size\n  isHidden: boolean\n  alignBottom: boolean\n  pane: string\n  enableEventPropagation: boolean\n  div: HTMLDivElement | null\n  closeListener: google.maps.MapsEventListener | null\n  moveListener: google.maps.MapsEventListener | null\n  mapListener: google.maps.MapsEventListener | null\n  contextListener: google.maps.MapsEventListener | null\n  eventListeners: google.maps.MapsEventListener[] | null\n  fixedWidthSet: boolean | null\n\n  constructor(options: InfoBoxOptions = {}) {\n    this.extend(InfoBox, google.maps.OverlayView)\n\n    // Standard options (in common with google.maps.InfoWindow):\n    this.content = options.content || ''\n    this.disableAutoPan = options.disableAutoPan || false\n    this.maxWidth = options.maxWidth || 0\n    this.pixelOffset = options.pixelOffset || new google.maps.Size(0, 0)\n    this.position = options.position || new google.maps.LatLng(0, 0)\n    this.zIndex = options.zIndex || null\n\n    // Additional options (unique to InfoBox):\n    this.boxClass = options.boxClass || 'infoBox'\n    this.boxStyle = options.boxStyle || {}\n    this.closeBoxMargin = options.closeBoxMargin || '2px'\n    this.closeBoxURL = options.closeBoxURL || 'http://www.google.com/intl/en_us/mapfiles/close.gif'\n    if (options.closeBoxURL === '') {\n      this.closeBoxURL = ''\n    }\n    this.infoBoxClearance = options.infoBoxClearance || new google.maps.Size(1, 1)\n\n    if (typeof options.visible === 'undefined') {\n      if (typeof options.isHidden === 'undefined') {\n        options.visible = true\n      } else {\n        options.visible = !options.isHidden\n      }\n    }\n    this.isHidden = !options.visible\n\n    this.alignBottom = options.alignBottom || false\n    this.pane = options.pane || 'floatPane'\n    this.enableEventPropagation = options.enableEventPropagation || false\n\n    this.div = null\n    this.closeListener = null\n    this.moveListener = null\n    this.mapListener = null\n    this.contextListener = null\n    this.eventListeners = null\n    this.fixedWidthSet = null\n  }\n\n  createInfoBoxDiv(): void {\n    // This handler prevents an event in the InfoBox from being passed on to the map.\n    function cancelHandler(event: Event) {\n      event.cancelBubble = true\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n    }\n\n    // This handler ignores the current event in the InfoBox and conditionally prevents\n    // the event from being passed on to the map. It is used for the contextmenu event.\n    // eslint-disable-next-line  @getify/proper-arrows/this\n    const ignoreHandler = (event: Event) => {\n      event.returnValue = false\n\n      if (event.preventDefault) {\n        event.preventDefault()\n      }\n\n      if (!this.enableEventPropagation) {\n        cancelHandler(event)\n      }\n    }\n\n    if (!this.div) {\n      this.div = document.createElement('div')\n      this.setBoxStyle()\n\n      if (typeof this.content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + this.content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(this.content)\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const panes = this.getPanes()\n      panes[this.pane].appendChild(this.div) // Add the InfoBox div to the DOM\n\n      this.addClickHandler()\n\n      if (this.div.style.width) {\n        this.fixedWidthSet = true\n      } else {\n        if (this.maxWidth !== 0 && this.div.offsetWidth > this.maxWidth) {\n          this.div.style.width = this.maxWidth + 'px'\n          this.fixedWidthSet = true\n        } else {\n          // The following code is needed to overcome problems with MSIE\n          const bw = this.getBoxWidths()\n          this.div.style.width = this.div.offsetWidth - bw.left - bw.right + 'px'\n          this.fixedWidthSet = false\n        }\n      }\n\n      this.panBox(this.disableAutoPan)\n\n      if (!this.enableEventPropagation) {\n        this.eventListeners = []\n\n        // Cancel event propagation.\n        // Note: mousemove not included (to resolve Issue 152)\n        const events = [\n          'mousedown',\n          'mouseover',\n          'mouseout',\n          'mouseup',\n          'click',\n          'dblclick',\n          'touchstart',\n          'touchend',\n          'touchmove',\n        ]\n\n        for (let i = 0; i < events.length; i++) {\n          this.eventListeners.push(\n            google.maps.event.addDomListener(this.div, events[i], cancelHandler)\n          )\n        }\n\n        // Workaround for Google bug that causes the cursor to change to a pointer\n        // when the mouse moves over a marker underneath InfoBox.\n        this.eventListeners.push(\n          google.maps.event.addDomListener(\n            this.div,\n            'mouseover',\n            // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n            () => {\n              if (this.div) {\n                this.div.style.cursor = 'default'\n              }\n            }\n          )\n        )\n      }\n\n      this.contextListener = google.maps.event.addDomListener(\n        this.div,\n        'contextmenu',\n        ignoreHandler\n      )\n\n      /**\n       * This event is fired when the DIV containing the InfoBox's content is attached to the DOM.\n       * @name InfoBox#domready\n       * @event\n       */\n      google.maps.event.trigger(this, 'domready')\n    }\n  }\n\n  getCloseBoxImg(): string {\n    let img = ''\n\n    if (this.closeBoxURL !== '') {\n      img = '<img alt=\"\"'\n      img += ' aria-hidden=\"true\"'\n      img += \" src='\" + this.closeBoxURL + \"'\"\n      img += ' align=right' // Do this because Opera chokes on style='float: right;'\n      img += \" style='\"\n      img += ' position: relative;' // Required by MSIE\n      img += ' cursor: pointer;'\n      img += ' margin: ' + this.closeBoxMargin + ';'\n      img += \"'>\"\n    }\n\n    return img\n  }\n\n  addClickHandler(): void {\n    if (this.div && this.div.firstChild && this.closeBoxURL !== '') {\n      const closeBox = this.div.firstChild\n      this.closeListener = google.maps.event.addDomListener(\n        closeBox,\n        'click',\n        this.getCloseClickHandler()\n      )\n    } else {\n      this.closeListener = null\n    }\n  }\n\n  getCloseClickHandler() {\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    return (event: Event) => {\n      // 1.0.3 fix: Always prevent propagation of a close box click to the map:\n      event.cancelBubble = true\n\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n\n      /**\n       * This event is fired when the InfoBox's close box is clicked.\n       * @name InfoBox#closeclick\n       * @event\n       */\n      google.maps.event.trigger(this, 'closeclick')\n\n      this.close()\n    }\n  }\n\n  panBox(disablePan?: boolean): void {\n    if (this.div && !disablePan) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n\n      // Only pan if attached to map, not panorama\n      if (map instanceof google.maps.Map) {\n        let xOffset = 0\n        let yOffset = 0\n\n        const bounds = map.getBounds()\n        if (bounds && !bounds.contains(this.position)) {\n          // Marker not in visible area of map, so set center\n          // of map to the marker position first.\n          map.setCenter(this.position)\n        }\n\n        const mapDiv = map.getDiv()\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapWidth = mapDiv.offsetWidth\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapHeight = mapDiv.offsetHeight\n        const iwOffsetX = this.pixelOffset.width\n        const iwOffsetY = this.pixelOffset.height\n        const iwWidth = this.div.offsetWidth\n        const iwHeight = this.div.offsetHeight\n        const padX = this.infoBoxClearance.width\n        const padY = this.infoBoxClearance.height\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const projection: google.maps.MapCanvasProjection = this.getProjection()\n        const pixPosition = projection.fromLatLngToContainerPixel(this.position)\n\n        if (pixPosition.x < -iwOffsetX + padX) {\n          xOffset = pixPosition.x + iwOffsetX - padX\n        } else if (pixPosition.x + iwWidth + iwOffsetX + padX > mapWidth) {\n          xOffset = pixPosition.x + iwWidth + iwOffsetX + padX - mapWidth\n        }\n        if (this.alignBottom) {\n          if (pixPosition.y < -iwOffsetY + padY + iwHeight) {\n            yOffset = pixPosition.y + iwOffsetY - padY - iwHeight\n          } else if (pixPosition.y + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwOffsetY + padY - mapHeight\n          }\n        } else {\n          if (pixPosition.y < -iwOffsetY + padY) {\n            yOffset = pixPosition.y + iwOffsetY - padY\n          } else if (pixPosition.y + iwHeight + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwHeight + iwOffsetY + padY - mapHeight\n          }\n        }\n\n        if (!(xOffset === 0 && yOffset === 0)) {\n          // Move the map to the shifted center.\n          map.panBy(xOffset, yOffset)\n        }\n      }\n    }\n  }\n\n  setBoxStyle(): void {\n    if (this.div) {\n      // Apply style values from the style sheet defined in the boxClass parameter:\n      this.div.className = this.boxClass\n\n      // Clear existing inline style values:\n      this.div.style.cssText = ''\n\n      // Apply style values defined in the boxStyle parameter:\n      const boxStyle = this.boxStyle\n      for (const i in boxStyle) {\n        if (boxStyle.hasOwnProperty(i)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.div.style[i] = boxStyle[i]\n        }\n      }\n\n      // Fix for iOS disappearing InfoBox problem\n      // See http://stackoverflow.com/questions/9229535/google-maps-markers-disappear-at-certain-zoom-level-only-on-iphone-ipad\n      this.div.style.webkitTransform = 'translateZ(0)'\n\n      // Fix up opacity style for benefit of MSIE\n      if (typeof this.div.style.opacity !== 'undefined' && this.div.style.opacity !== '') {\n        // See http://www.quirksmode.org/css/opacity.html\n        const opacity = parseFloat(this.div.style.opacity || '')\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.div.style.msFilter =\n          '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity * 100 + ')\"'\n        this.div.style.filter = 'alpha(opacity=' + opacity * 100 + ')'\n      }\n\n      // Apply required styles\n      this.div.style.position = 'absolute'\n      this.div.style.visibility = 'hidden'\n      if (this.zIndex !== null) {\n        this.div.style.zIndex = this.zIndex + ''\n      }\n      if (!this.div.style.overflow) {\n        this.div.style.overflow = 'auto'\n      }\n    }\n  }\n\n  getBoxWidths(): { bottom: number; left: number; right: number; top: number } {\n    const bw = { top: 0, bottom: 0, left: 0, right: 0 }\n\n    if (!this.div) {\n      return bw\n    }\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      const ownerDocument = this.div.ownerDocument\n      const computedStyle =\n        ownerDocument && ownerDocument.defaultView\n          ? ownerDocument.defaultView.getComputedStyle(this.div, '')\n          : null\n\n      if (computedStyle) {\n        // The computed styles are always in pixel units (good!)\n        bw.top = parseInt(computedStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(computedStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(computedStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(computedStyle.borderRightWidth || '', 10) || 0\n      }\n    } else if (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      document.documentElement.currentStyle // MSIE\n    ) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const currentStyle = this.div.currentStyle\n\n      if (currentStyle) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // The current styles may not be in pixel units, but assume they are (bad!)\n        bw.top = parseInt(currentStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(currentStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(currentStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(currentStyle.borderRightWidth || '', 10) || 0\n      }\n    }\n\n    return bw\n  }\n\n  onRemove(): void {\n    if (this.div && this.div.parentNode) {\n      this.div.parentNode.removeChild(this.div)\n      this.div = null\n    }\n  }\n\n  draw(): void {\n    this.createInfoBoxDiv()\n\n    if (this.div) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const projection: google.maps.MapCanvasProjection = this.getProjection()\n      const pixPosition = projection.fromLatLngToDivPixel(this.position)\n\n      this.div.style.left = pixPosition.x + this.pixelOffset.width + 'px'\n\n      if (this.alignBottom) {\n        this.div.style.bottom = -(pixPosition.y + this.pixelOffset.height) + 'px'\n      } else {\n        this.div.style.top = pixPosition.y + this.pixelOffset.height + 'px'\n      }\n\n      if (this.isHidden) {\n        this.div.style.visibility = 'hidden'\n      } else {\n        this.div.style.visibility = 'visible'\n      }\n    }\n  }\n\n  setOptions(options: InfoBoxOptions = {}): void {\n    if (typeof options.boxClass !== 'undefined') {\n      // Must be first\n      this.boxClass = options.boxClass\n      this.setBoxStyle()\n    }\n    if (typeof options.boxStyle !== 'undefined') {\n      // Must be second\n      this.boxStyle = options.boxStyle\n      this.setBoxStyle()\n    }\n    if (typeof options.content !== 'undefined') {\n      this.setContent(options.content)\n    }\n    if (typeof options.disableAutoPan !== 'undefined') {\n      this.disableAutoPan = options.disableAutoPan\n    }\n    if (typeof options.maxWidth !== 'undefined') {\n      this.maxWidth = options.maxWidth\n    }\n    if (typeof options.pixelOffset !== 'undefined') {\n      this.pixelOffset = options.pixelOffset\n    }\n    if (typeof options.alignBottom !== 'undefined') {\n      this.alignBottom = options.alignBottom\n    }\n    if (typeof options.position !== 'undefined') {\n      this.setPosition(options.position)\n    }\n    if (typeof options.zIndex !== 'undefined') {\n      this.setZIndex(options.zIndex)\n    }\n    if (typeof options.closeBoxMargin !== 'undefined') {\n      this.closeBoxMargin = options.closeBoxMargin\n    }\n    if (typeof options.closeBoxURL !== 'undefined') {\n      this.closeBoxURL = options.closeBoxURL\n    }\n    if (typeof options.infoBoxClearance !== 'undefined') {\n      this.infoBoxClearance = options.infoBoxClearance\n    }\n    if (typeof options.isHidden !== 'undefined') {\n      this.isHidden = options.isHidden\n    }\n    if (typeof options.visible !== 'undefined') {\n      this.isHidden = !options.visible\n    }\n    if (typeof options.enableEventPropagation !== 'undefined') {\n      this.enableEventPropagation = options.enableEventPropagation\n    }\n\n    if (this.div) {\n      this.draw()\n    }\n  }\n\n  setContent(content: string | Node): void {\n    this.content = content\n\n    if (this.div) {\n      if (this.closeListener) {\n        google.maps.event.removeListener(this.closeListener)\n        this.closeListener = null\n      }\n\n      // Odd code required to make things work with MSIE.\n      if (!this.fixedWidthSet) {\n        this.div.style.width = ''\n      }\n\n      if (typeof content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(content)\n      }\n\n      // Perverse code required to make things work with MSIE.\n      // (Ensures the close box does, in fact, float to the right.)\n      if (!this.fixedWidthSet) {\n        this.div.style.width = this.div.offsetWidth + 'px'\n        if (typeof content === 'string') {\n          this.div.innerHTML = this.getCloseBoxImg() + content\n        } else {\n          this.div.innerHTML = this.getCloseBoxImg()\n          this.div.appendChild(content)\n        }\n      }\n\n      this.addClickHandler()\n    }\n\n    /**\n     * This event is fired when the content of the InfoBox changes.\n     * @name InfoBox#content_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'content_changed')\n  }\n\n  setPosition(latLng: google.maps.LatLng): void {\n    this.position = latLng\n\n    if (this.div) {\n      this.draw()\n    }\n\n    /**\n     * This event is fired when the position of the InfoBox changes.\n     * @name InfoBox#position_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'position_changed')\n  }\n\n  setVisible(isVisible: boolean): void {\n    this.isHidden = !isVisible\n    if (this.div) {\n      this.div.style.visibility = this.isHidden ? 'hidden' : 'visible'\n    }\n  }\n\n  setZIndex(index: number): void {\n    this.zIndex = index\n\n    if (this.div) {\n      this.div.style.zIndex = index + ''\n    }\n\n    /**\n     * This event is fired when the zIndex of the InfoBox changes.\n     * @name InfoBox#zindex_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'zindex_changed')\n  }\n\n  getContent(): string | Node {\n    return this.content\n  }\n\n  getPosition(): google.maps.LatLng {\n    return this.position\n  }\n\n  getZIndex(): number | null | undefined {\n    return this.zIndex\n  }\n\n  getVisible(): boolean {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n    let isVisible\n\n    if (typeof map === 'undefined' || map === null) {\n      isVisible = false\n    } else {\n      isVisible = !this.isHidden\n    }\n\n    return isVisible\n  }\n\n  show(): void {\n    this.isHidden = false\n    if (this.div) {\n      this.div.style.visibility = 'visible'\n    }\n  }\n\n  hide(): void {\n    this.isHidden = true\n    if (this.div) {\n      this.div.style.visibility = 'hidden'\n    }\n  }\n\n  open(\n    map: google.maps.Map | google.maps.StreetViewPanorama,\n    anchor?: google.maps.MVCObject\n  ): void {\n    if (anchor) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.position = anchor.getPosition()\n      this.moveListener = google.maps.event.addListener(\n        anchor,\n        'position_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          const position = anchor.getPosition()\n          this.setPosition(position)\n        }\n      )\n\n      this.mapListener = google.maps.event.addListener(\n        anchor,\n        'map_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.setMap(anchor.map)\n        }\n      )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(map)\n\n    if (this.div) {\n      this.panBox()\n    }\n  }\n\n  close() {\n    if (this.closeListener) {\n      google.maps.event.removeListener(this.closeListener)\n      this.closeListener = null\n    }\n\n    if (this.eventListeners) {\n      for (let i = 0; i < this.eventListeners.length; i++) {\n        google.maps.event.removeListener(this.eventListeners[i])\n      }\n      this.eventListeners = null\n    }\n\n    if (this.moveListener) {\n      google.maps.event.removeListener(this.moveListener)\n      this.moveListener = null\n    }\n\n    if (this.mapListener) {\n      google.maps.event.removeListener(this.mapListener)\n      this.mapListener = null\n    }\n\n    if (this.contextListener) {\n      google.maps.event.removeListener(this.contextListener)\n      this.contextListener = null\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(null)\n  }\n\n  extend(obj1: any, obj2: any): any {\n    return function applyExtend(object: any) {\n      // eslint-disable-next-line guard-for-in\n      for (const property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        if (!this.prototype.hasOwnProperty(property)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.prototype[property] = object.prototype[property]\n        }\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      return this\n    }.apply(obj1, [obj2])\n  }\n}\n"],"names":["InfoBox","options","extend","google","maps","OverlayView","content","disableAutoPan","maxWidth","pixelOffset","Size","position","LatLng","zIndex","boxClass","boxStyle","closeBoxMargin","closeBoxURL","infoBoxClearance","visible","isHidden","alignBottom","pane","enableEventPropagation","div","closeListener","moveListener","mapListener","contextListener","eventListeners","fixedWidthSet","createInfoBoxDiv","cancelHandler","event","cancelBubble","stopPropagation","ignoreHandler","returnValue","preventDefault","document","createElement","setBoxStyle","innerHTML","getCloseBoxImg","appendChild","panes","getPanes","addClickHandler","style","width","offsetWidth","bw","getBoxWidths","left","right","panBox","events","i","length","push","addDomListener","cursor","trigger","img","firstChild","closeBox","getCloseClickHandler","close","disablePan","map","getMap","Map","xOffset","yOffset","bounds","getBounds","contains","setCenter","mapDiv","getDiv","mapWidth","mapHeight","offsetHeight","iwOffsetX","iwOffsetY","height","iwWidth","iwHeight","padX","padY","projection","getProjection","pixPosition","fromLatLngToContainerPixel","x","y","panBy","className","cssText","hasOwnProperty","webkitTransform","opacity","parseFloat","msFilter","filter","visibility","overflow","top","bottom","defaultView","getComputedStyle","ownerDocument","computedStyle","parseInt","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","documentElement","currentStyle","onRemove","parentNode","removeChild","draw","fromLatLngToDivPixel","setOptions","setContent","setPosition","setZIndex","removeListener","latLng","setVisible","isVisible","index","getContent","getPosition","getZIndex","getVisible","show","hide","open","anchor","addListener","setMap","obj1","obj2","applyExtend","object","property","prototype","apply"],"mappings":";;IAIaA,OAAb;AA0BE,mBAAYC,OAAZ;QAAYA;AAAAA,MAAAA,UAA0B;;;AACpC,SAAKC,MAAL,CAAYF,OAAZ,EAAqBG,MAAM,CAACC,IAAP,CAAYC,WAAjC;;AAGA,SAAKC,OAAL,GAAeL,OAAO,CAACK,OAAR,IAAmB,EAAlC;AACA,SAAKC,cAAL,GAAsBN,OAAO,CAACM,cAAR,IAA0B,KAAhD;AACA,SAAKC,QAAL,GAAgBP,OAAO,CAACO,QAAR,IAAoB,CAApC;AACA,SAAKC,WAAL,GAAmBR,OAAO,CAACQ,WAAR,IAAuB,IAAIN,MAAM,CAACC,IAAP,CAAYM,IAAhB,CAAqB,CAArB,EAAwB,CAAxB,CAA1C;AACA,SAAKC,QAAL,GAAgBV,OAAO,CAACU,QAAR,IAAoB,IAAIR,MAAM,CAACC,IAAP,CAAYQ,MAAhB,CAAuB,CAAvB,EAA0B,CAA1B,CAApC;AACA,SAAKC,MAAL,GAAcZ,OAAO,CAACY,MAAR,IAAkB,IAAhC;;AAGA,SAAKC,QAAL,GAAgBb,OAAO,CAACa,QAAR,IAAoB,SAApC;AACA,SAAKC,QAAL,GAAgBd,OAAO,CAACc,QAAR,IAAoB,EAApC;AACA,SAAKC,cAAL,GAAsBf,OAAO,CAACe,cAAR,IAA0B,KAAhD;AACA,SAAKC,WAAL,GAAmBhB,OAAO,CAACgB,WAAR,IAAuB,qDAA1C;;AACA,QAAIhB,OAAO,CAACgB,WAAR,KAAwB,EAA5B,EAAgC;AAC9B,WAAKA,WAAL,GAAmB,EAAnB;AACD;;AACD,SAAKC,gBAAL,GAAwBjB,OAAO,CAACiB,gBAAR,IAA4B,IAAIf,MAAM,CAACC,IAAP,CAAYM,IAAhB,CAAqB,CAArB,EAAwB,CAAxB,CAApD;;AAEA,QAAI,OAAOT,OAAO,CAACkB,OAAf,KAA2B,WAA/B,EAA4C;AAC1C,UAAI,OAAOlB,OAAO,CAACmB,QAAf,KAA4B,WAAhC,EAA6C;AAC3CnB,QAAAA,OAAO,CAACkB,OAAR,GAAkB,IAAlB;AACD,OAFD,MAEO;AACLlB,QAAAA,OAAO,CAACkB,OAAR,GAAkB,CAAClB,OAAO,CAACmB,QAA3B;AACD;AACF;;AACD,SAAKA,QAAL,GAAgB,CAACnB,OAAO,CAACkB,OAAzB;AAEA,SAAKE,WAAL,GAAmBpB,OAAO,CAACoB,WAAR,IAAuB,KAA1C;AACA,SAAKC,IAAL,GAAYrB,OAAO,CAACqB,IAAR,IAAgB,WAA5B;AACA,SAAKC,sBAAL,GAA8BtB,OAAO,CAACsB,sBAAR,IAAkC,KAAhE;AAEA,SAAKC,GAAL,GAAW,IAAX;AACA,SAAKC,aAAL,GAAqB,IAArB;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,eAAL,GAAuB,IAAvB;AACA,SAAKC,cAAL,GAAsB,IAAtB;AACA,SAAKC,aAAL,GAAqB,IAArB;AACD;;AAnEH;;AAAA,SAqEEC,gBArEF,GAqEE;;;AACE;AACA,aAASC,aAAT,CAAuBC,KAAvB;AACEA,MAAAA,KAAK,CAACC,YAAN,GAAqB,IAArB;;AACA,UAAID,KAAK,CAACE,eAAV,EAA2B;AACzBF,QAAAA,KAAK,CAACE,eAAN;AACD;AACF;AAGD;AACA;;;AACA,QAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACH,KAAD;AACpBA,MAAAA,KAAK,CAACI,WAAN,GAAoB,KAApB;;AAEA,UAAIJ,KAAK,CAACK,cAAV,EAA0B;AACxBL,QAAAA,KAAK,CAACK,cAAN;AACD;;AAED,UAAI,CAAC,KAAI,CAACf,sBAAV,EAAkC;AAChCS,QAAAA,aAAa,CAACC,KAAD,CAAb;AACD;AACF,KAVD;;AAYA,QAAI,CAAC,KAAKT,GAAV,EAAe;AACb,WAAKA,GAAL,GAAWe,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAX;AACA,WAAKC,WAAL;;AAEA,UAAI,OAAO,KAAKnC,OAAZ,KAAwB,QAA5B,EAAsC;AACpC,aAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,KAAwB,KAAKrC,OAAlD;AACD,OAFD,MAEO;AACL,aAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,EAArB;AACA,aAAKnB,GAAL,CAASoB,WAAT,CAAqB,KAAKtC,OAA1B;AACD,OATY;AAYb;;;AACA,UAAMuC,KAAK,GAAG,KAAKC,QAAL,EAAd;AACAD,MAAAA,KAAK,CAAC,KAAKvB,IAAN,CAAL,CAAiBsB,WAAjB,CAA6B,KAAKpB,GAAlC,EAda;;AAgBb,WAAKuB,eAAL;;AAEA,UAAI,KAAKvB,GAAL,CAASwB,KAAT,CAAeC,KAAnB,EAA0B;AACxB,aAAKnB,aAAL,GAAqB,IAArB;AACD,OAFD,MAEO;AACL,YAAI,KAAKtB,QAAL,KAAkB,CAAlB,IAAuB,KAAKgB,GAAL,CAAS0B,WAAT,GAAuB,KAAK1C,QAAvD,EAAiE;AAC/D,eAAKgB,GAAL,CAASwB,KAAT,CAAeC,KAAf,GAAuB,KAAKzC,QAAL,GAAgB,IAAvC;AACA,eAAKsB,aAAL,GAAqB,IAArB;AACD,SAHD,MAGO;AACL;AACA,cAAMqB,EAAE,GAAG,KAAKC,YAAL,EAAX;AACA,eAAK5B,GAAL,CAASwB,KAAT,CAAeC,KAAf,GAAuB,KAAKzB,GAAL,CAAS0B,WAAT,GAAuBC,EAAE,CAACE,IAA1B,GAAiCF,EAAE,CAACG,KAApC,GAA4C,IAAnE;AACA,eAAKxB,aAAL,GAAqB,KAArB;AACD;AACF;;AAED,WAAKyB,MAAL,CAAY,KAAKhD,cAAjB;;AAEA,UAAI,CAAC,KAAKgB,sBAAV,EAAkC;AAChC,aAAKM,cAAL,GAAsB,EAAtB,CADgC;AAIhC;;AACA,YAAM2B,MAAM,GAAG,CACb,WADa,EAEb,WAFa,EAGb,UAHa,EAIb,SAJa,EAKb,OALa,EAMb,UANa,EAOb,YAPa,EAQb,UARa,EASb,WATa,CAAf;;AAYA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAACE,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC,eAAK5B,cAAL,CAAoB8B,IAApB,CACExD,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB2B,cAAlB,CAAiC,KAAKpC,GAAtC,EAA2CgC,MAAM,CAACC,CAAD,CAAjD,EAAsDzB,aAAtD,CADF;AAGD,SArB+B;AAwBhC;;;AACA,aAAKH,cAAL,CAAoB8B,IAApB,CACExD,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB2B,cAAlB,CACE,KAAKpC,GADP,EAEE,WAFF;AAIE;AACE,cAAI,KAAI,CAACA,GAAT,EAAc;AACZ,YAAA,KAAI,CAACA,GAAL,CAASwB,KAAT,CAAea,MAAf,GAAwB,SAAxB;AACD;AACF,SARH,CADF;AAYD;;AAED,WAAKjC,eAAL,GAAuBzB,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB2B,cAAlB,CACrB,KAAKpC,GADgB,EAErB,aAFqB,EAGrBY,aAHqB,CAAvB;AAMA;;;;;;AAKAjC,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6B,OAAlB,CAA0B,IAA1B,EAAgC,UAAhC;AACD;AACF,GAnLH;;AAAA,SAqLEnB,cArLF,GAqLE;AACE,QAAIoB,GAAG,GAAG,EAAV;;AAEA,QAAI,KAAK9C,WAAL,KAAqB,EAAzB,EAA6B;AAC3B8C,MAAAA,GAAG,GAAG,aAAN;AACAA,MAAAA,GAAG,IAAI,qBAAP;AACAA,MAAAA,GAAG,IAAI,WAAW,KAAK9C,WAAhB,GAA8B,GAArC;AACA8C,MAAAA,GAAG,IAAI,cAAP,CAJ2B;;AAK3BA,MAAAA,GAAG,IAAI,UAAP;AACAA,MAAAA,GAAG,IAAI,sBAAP,CAN2B;;AAO3BA,MAAAA,GAAG,IAAI,mBAAP;AACAA,MAAAA,GAAG,IAAI,cAAc,KAAK/C,cAAnB,GAAoC,GAA3C;AACA+C,MAAAA,GAAG,IAAI,IAAP;AACD;;AAED,WAAOA,GAAP;AACD,GArMH;;AAAA,SAuMEhB,eAvMF,GAuME;AACE,QAAI,KAAKvB,GAAL,IAAY,KAAKA,GAAL,CAASwC,UAArB,IAAmC,KAAK/C,WAAL,KAAqB,EAA5D,EAAgE;AAC9D,UAAMgD,QAAQ,GAAG,KAAKzC,GAAL,CAASwC,UAA1B;AACA,WAAKvC,aAAL,GAAqBtB,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB2B,cAAlB,CACnBK,QADmB,EAEnB,OAFmB,EAGnB,KAAKC,oBAAL,EAHmB,CAArB;AAKD,KAPD,MAOO;AACL,WAAKzC,aAAL,GAAqB,IAArB;AACD;AACF,GAlNH;;AAAA,SAoNEyC,oBApNF,GAoNE;;;AACE;AACA,WAAO,UAACjC,KAAD;AACL;AACAA,MAAAA,KAAK,CAACC,YAAN,GAAqB,IAArB;;AAEA,UAAID,KAAK,CAACE,eAAV,EAA2B;AACzBF,QAAAA,KAAK,CAACE,eAAN;AACD;AAED;;;;;;;AAKAhC,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6B,OAAlB,CAA0B,MAA1B,EAAgC,YAAhC;;AAEA,MAAA,MAAI,CAACK,KAAL;AACD,KAhBD;AAiBD,GAvOH;;AAAA,SAyOEZ,MAzOF,GAyOE,gBAAOa,UAAP;AACE,QAAI,KAAK5C,GAAL,IAAY,CAAC4C,UAAjB,EAA6B;AAC3B;AACA;AACA,UAAMC,GAAG,GAAwE,KAAKC,MAAL,EAAjF,CAH2B;;AAM3B,UAAID,GAAG,YAAYlE,MAAM,CAACC,IAAP,CAAYmE,GAA/B,EAAoC;AAClC,YAAIC,OAAO,GAAG,CAAd;AACA,YAAIC,OAAO,GAAG,CAAd;AAEA,YAAMC,MAAM,GAAGL,GAAG,CAACM,SAAJ,EAAf;;AACA,YAAID,MAAM,IAAI,CAACA,MAAM,CAACE,QAAP,CAAgB,KAAKjE,QAArB,CAAf,EAA+C;AAC7C;AACA;AACA0D,UAAAA,GAAG,CAACQ,SAAJ,CAAc,KAAKlE,QAAnB;AACD;;AAED,YAAMmE,MAAM,GAAGT,GAAG,CAACU,MAAJ,EAAf,CAXkC;AAalC;;AACA,YAAMC,QAAQ,GAAGF,MAAM,CAAC5B,WAAxB,CAdkC;AAgBlC;;AACA,YAAM+B,SAAS,GAAGH,MAAM,CAACI,YAAzB;AACA,YAAMC,SAAS,GAAG,KAAK1E,WAAL,CAAiBwC,KAAnC;AACA,YAAMmC,SAAS,GAAG,KAAK3E,WAAL,CAAiB4E,MAAnC;AACA,YAAMC,OAAO,GAAG,KAAK9D,GAAL,CAAS0B,WAAzB;AACA,YAAMqC,QAAQ,GAAG,KAAK/D,GAAL,CAAS0D,YAA1B;AACA,YAAMM,IAAI,GAAG,KAAKtE,gBAAL,CAAsB+B,KAAnC;AACA,YAAMwC,IAAI,GAAG,KAAKvE,gBAAL,CAAsBmE,MAAnC,CAvBkC;AA0BlC;;AACA,YAAMK,UAAU,GAAoC,KAAKC,aAAL,EAApD;AACA,YAAMC,WAAW,GAAGF,UAAU,CAACG,0BAAX,CAAsC,KAAKlF,QAA3C,CAApB;;AAEA,YAAIiF,WAAW,CAACE,CAAZ,GAAgB,CAACX,SAAD,GAAaK,IAAjC,EAAuC;AACrChB,UAAAA,OAAO,GAAGoB,WAAW,CAACE,CAAZ,GAAgBX,SAAhB,GAA4BK,IAAtC;AACD,SAFD,MAEO,IAAII,WAAW,CAACE,CAAZ,GAAgBR,OAAhB,GAA0BH,SAA1B,GAAsCK,IAAtC,GAA6CR,QAAjD,EAA2D;AAChER,UAAAA,OAAO,GAAGoB,WAAW,CAACE,CAAZ,GAAgBR,OAAhB,GAA0BH,SAA1B,GAAsCK,IAAtC,GAA6CR,QAAvD;AACD;;AACD,YAAI,KAAK3D,WAAT,EAAsB;AACpB,cAAIuE,WAAW,CAACG,CAAZ,GAAgB,CAACX,SAAD,GAAaK,IAAb,GAAoBF,QAAxC,EAAkD;AAChDd,YAAAA,OAAO,GAAGmB,WAAW,CAACG,CAAZ,GAAgBX,SAAhB,GAA4BK,IAA5B,GAAmCF,QAA7C;AACD,WAFD,MAEO,IAAIK,WAAW,CAACG,CAAZ,GAAgBX,SAAhB,GAA4BK,IAA5B,GAAmCR,SAAvC,EAAkD;AACvDR,YAAAA,OAAO,GAAGmB,WAAW,CAACG,CAAZ,GAAgBX,SAAhB,GAA4BK,IAA5B,GAAmCR,SAA7C;AACD;AACF,SAND,MAMO;AACL,cAAIW,WAAW,CAACG,CAAZ,GAAgB,CAACX,SAAD,GAAaK,IAAjC,EAAuC;AACrChB,YAAAA,OAAO,GAAGmB,WAAW,CAACG,CAAZ,GAAgBX,SAAhB,GAA4BK,IAAtC;AACD,WAFD,MAEO,IAAIG,WAAW,CAACG,CAAZ,GAAgBR,QAAhB,GAA2BH,SAA3B,GAAuCK,IAAvC,GAA8CR,SAAlD,EAA6D;AAClER,YAAAA,OAAO,GAAGmB,WAAW,CAACG,CAAZ,GAAgBR,QAAhB,GAA2BH,SAA3B,GAAuCK,IAAvC,GAA8CR,SAAxD;AACD;AACF;;AAED,YAAI,EAAET,OAAO,KAAK,CAAZ,IAAiBC,OAAO,KAAK,CAA/B,CAAJ,EAAuC;AACrC;AACAJ,UAAAA,GAAG,CAAC2B,KAAJ,CAAUxB,OAAV,EAAmBC,OAAnB;AACD;AACF;AACF;AACF,GAvSH;;AAAA,SAySEhC,WAzSF,GAySE;AACE,QAAI,KAAKjB,GAAT,EAAc;AACZ;AACA,WAAKA,GAAL,CAASyE,SAAT,GAAqB,KAAKnF,QAA1B,CAFY;;AAKZ,WAAKU,GAAL,CAASwB,KAAT,CAAekD,OAAf,GAAyB,EAAzB,CALY;;AAQZ,UAAMnF,QAAQ,GAAG,KAAKA,QAAtB;;AACA,WAAK,IAAM0C,CAAX,IAAgB1C,QAAhB,EAA0B;AACxB,YAAIA,QAAQ,CAACoF,cAAT,CAAwB1C,CAAxB,CAAJ,EAAgC;AAC9B;AACA;AACA,eAAKjC,GAAL,CAASwB,KAAT,CAAeS,CAAf,IAAoB1C,QAAQ,CAAC0C,CAAD,CAA5B;AACD;AACF,OAfW;AAkBZ;;;AACA,WAAKjC,GAAL,CAASwB,KAAT,CAAeoD,eAAf,GAAiC,eAAjC,CAnBY;;AAsBZ,UAAI,OAAO,KAAK5E,GAAL,CAASwB,KAAT,CAAeqD,OAAtB,KAAkC,WAAlC,IAAiD,KAAK7E,GAAL,CAASwB,KAAT,CAAeqD,OAAf,KAA2B,EAAhF,EAAoF;AAClF;AACA,YAAMA,OAAO,GAAGC,UAAU,CAAC,KAAK9E,GAAL,CAASwB,KAAT,CAAeqD,OAAf,IAA0B,EAA3B,CAA1B,CAFkF;AAKlF;;AACA,aAAK7E,GAAL,CAASwB,KAAT,CAAeuD,QAAf,GACE,sDAAsDF,OAAO,GAAG,GAAhE,GAAsE,IADxE;AAEA,aAAK7E,GAAL,CAASwB,KAAT,CAAewD,MAAf,GAAwB,mBAAmBH,OAAO,GAAG,GAA7B,GAAmC,GAA3D;AACD,OA/BW;;;AAkCZ,WAAK7E,GAAL,CAASwB,KAAT,CAAerC,QAAf,GAA0B,UAA1B;AACA,WAAKa,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,QAA5B;;AACA,UAAI,KAAK5F,MAAL,KAAgB,IAApB,EAA0B;AACxB,aAAKW,GAAL,CAASwB,KAAT,CAAenC,MAAf,GAAwB,KAAKA,MAAL,GAAc,EAAtC;AACD;;AACD,UAAI,CAAC,KAAKW,GAAL,CAASwB,KAAT,CAAe0D,QAApB,EAA8B;AAC5B,aAAKlF,GAAL,CAASwB,KAAT,CAAe0D,QAAf,GAA0B,MAA1B;AACD;AACF;AACF,GArVH;;AAAA,SAuVEtD,YAvVF,GAuVE;AACE,QAAMD,EAAE,GAAG;AAAEwD,MAAAA,GAAG,EAAE,CAAP;AAAUC,MAAAA,MAAM,EAAE,CAAlB;AAAqBvD,MAAAA,IAAI,EAAE,CAA3B;AAA8BC,MAAAA,KAAK,EAAE;AAArC,KAAX;;AAEA,QAAI,CAAC,KAAK9B,GAAV,EAAe;AACb,aAAO2B,EAAP;AACD;;AAED,QAAIZ,QAAQ,CAACsE,WAAT,IAAwBtE,QAAQ,CAACsE,WAAT,CAAqBC,gBAAjD,EAAmE;AACjE,UAAMC,aAAa,GAAG,KAAKvF,GAAL,CAASuF,aAA/B;AACA,UAAMC,aAAa,GACjBD,aAAa,IAAIA,aAAa,CAACF,WAA/B,GACIE,aAAa,CAACF,WAAd,CAA0BC,gBAA1B,CAA2C,KAAKtF,GAAhD,EAAqD,EAArD,CADJ,GAEI,IAHN;;AAKA,UAAIwF,aAAJ,EAAmB;AACjB;AACA7D,QAAAA,EAAE,CAACwD,GAAH,GAASM,QAAQ,CAACD,aAAa,CAACE,cAAd,IAAgC,EAAjC,EAAqC,EAArC,CAAR,IAAoD,CAA7D;AACA/D,QAAAA,EAAE,CAACyD,MAAH,GAAYK,QAAQ,CAACD,aAAa,CAACG,iBAAd,IAAmC,EAApC,EAAwC,EAAxC,CAAR,IAAuD,CAAnE;AACAhE,QAAAA,EAAE,CAACE,IAAH,GAAU4D,QAAQ,CAACD,aAAa,CAACI,eAAd,IAAiC,EAAlC,EAAsC,EAAtC,CAAR,IAAqD,CAA/D;AACAjE,QAAAA,EAAE,CAACG,KAAH,GAAW2D,QAAQ,CAACD,aAAa,CAACK,gBAAd,IAAkC,EAAnC,EAAuC,EAAvC,CAAR,IAAsD,CAAjE;AACD;AACF,KAdD,MAcO;AAEL;AACA9E,IAAAA,QAAQ,CAAC+E,eAAT,CAAyBC,YAHpB;AAAA,MAIL;AACA;AACA;AACA,YAAMA,YAAY,GAAG,KAAK/F,GAAL,CAAS+F,YAA9B;;AAEA,YAAIA,YAAJ,EAAkB;AAChB;AACA;AACApE,UAAAA,EAAE,CAACwD,GAAH,GAASM,QAAQ,CAACM,YAAY,CAACL,cAAb,IAA+B,EAAhC,EAAoC,EAApC,CAAR,IAAmD,CAA5D;AACA/D,UAAAA,EAAE,CAACyD,MAAH,GAAYK,QAAQ,CAACM,YAAY,CAACJ,iBAAb,IAAkC,EAAnC,EAAuC,EAAvC,CAAR,IAAsD,CAAlE;AACAhE,UAAAA,EAAE,CAACE,IAAH,GAAU4D,QAAQ,CAACM,YAAY,CAACH,eAAb,IAAgC,EAAjC,EAAqC,EAArC,CAAR,IAAoD,CAA9D;AACAjE,UAAAA,EAAE,CAACG,KAAH,GAAW2D,QAAQ,CAACM,YAAY,CAACF,gBAAb,IAAiC,EAAlC,EAAsC,EAAtC,CAAR,IAAqD,CAAhE;AACD;AACF;;AAED,WAAOlE,EAAP;AACD,GAhYH;;AAAA,SAkYEqE,QAlYF,GAkYE;AACE,QAAI,KAAKhG,GAAL,IAAY,KAAKA,GAAL,CAASiG,UAAzB,EAAqC;AACnC,WAAKjG,GAAL,CAASiG,UAAT,CAAoBC,WAApB,CAAgC,KAAKlG,GAArC;AACA,WAAKA,GAAL,GAAW,IAAX;AACD;AACF,GAvYH;;AAAA,SAyYEmG,IAzYF,GAyYE;AACE,SAAK5F,gBAAL;;AAEA,QAAI,KAAKP,GAAT,EAAc;AACZ;AACA;AACA,UAAMkE,UAAU,GAAoC,KAAKC,aAAL,EAApD;AACA,UAAMC,WAAW,GAAGF,UAAU,CAACkC,oBAAX,CAAgC,KAAKjH,QAArC,CAApB;AAEA,WAAKa,GAAL,CAASwB,KAAT,CAAeK,IAAf,GAAsBuC,WAAW,CAACE,CAAZ,GAAgB,KAAKrF,WAAL,CAAiBwC,KAAjC,GAAyC,IAA/D;;AAEA,UAAI,KAAK5B,WAAT,EAAsB;AACpB,aAAKG,GAAL,CAASwB,KAAT,CAAe4D,MAAf,GAAwB,EAAEhB,WAAW,CAACG,CAAZ,GAAgB,KAAKtF,WAAL,CAAiB4E,MAAnC,IAA6C,IAArE;AACD,OAFD,MAEO;AACL,aAAK7D,GAAL,CAASwB,KAAT,CAAe2D,GAAf,GAAqBf,WAAW,CAACG,CAAZ,GAAgB,KAAKtF,WAAL,CAAiB4E,MAAjC,GAA0C,IAA/D;AACD;;AAED,UAAI,KAAKjE,QAAT,EAAmB;AACjB,aAAKI,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,QAA5B;AACD,OAFD,MAEO;AACL,aAAKjF,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,SAA5B;AACD;AACF;AACF,GAhaH;;AAAA,SAkaEoB,UAlaF,GAkaE,oBAAW5H,OAAX;QAAWA;AAAAA,MAAAA,UAA0B;;;AACnC,QAAI,OAAOA,OAAO,CAACa,QAAf,KAA4B,WAAhC,EAA6C;AAC3C;AACA,WAAKA,QAAL,GAAgBb,OAAO,CAACa,QAAxB;AACA,WAAK2B,WAAL;AACD;;AACD,QAAI,OAAOxC,OAAO,CAACc,QAAf,KAA4B,WAAhC,EAA6C;AAC3C;AACA,WAAKA,QAAL,GAAgBd,OAAO,CAACc,QAAxB;AACA,WAAK0B,WAAL;AACD;;AACD,QAAI,OAAOxC,OAAO,CAACK,OAAf,KAA2B,WAA/B,EAA4C;AAC1C,WAAKwH,UAAL,CAAgB7H,OAAO,CAACK,OAAxB;AACD;;AACD,QAAI,OAAOL,OAAO,CAACM,cAAf,KAAkC,WAAtC,EAAmD;AACjD,WAAKA,cAAL,GAAsBN,OAAO,CAACM,cAA9B;AACD;;AACD,QAAI,OAAON,OAAO,CAACO,QAAf,KAA4B,WAAhC,EAA6C;AAC3C,WAAKA,QAAL,GAAgBP,OAAO,CAACO,QAAxB;AACD;;AACD,QAAI,OAAOP,OAAO,CAACQ,WAAf,KAA+B,WAAnC,EAAgD;AAC9C,WAAKA,WAAL,GAAmBR,OAAO,CAACQ,WAA3B;AACD;;AACD,QAAI,OAAOR,OAAO,CAACoB,WAAf,KAA+B,WAAnC,EAAgD;AAC9C,WAAKA,WAAL,GAAmBpB,OAAO,CAACoB,WAA3B;AACD;;AACD,QAAI,OAAOpB,OAAO,CAACU,QAAf,KAA4B,WAAhC,EAA6C;AAC3C,WAAKoH,WAAL,CAAiB9H,OAAO,CAACU,QAAzB;AACD;;AACD,QAAI,OAAOV,OAAO,CAACY,MAAf,KAA0B,WAA9B,EAA2C;AACzC,WAAKmH,SAAL,CAAe/H,OAAO,CAACY,MAAvB;AACD;;AACD,QAAI,OAAOZ,OAAO,CAACe,cAAf,KAAkC,WAAtC,EAAmD;AACjD,WAAKA,cAAL,GAAsBf,OAAO,CAACe,cAA9B;AACD;;AACD,QAAI,OAAOf,OAAO,CAACgB,WAAf,KAA+B,WAAnC,EAAgD;AAC9C,WAAKA,WAAL,GAAmBhB,OAAO,CAACgB,WAA3B;AACD;;AACD,QAAI,OAAOhB,OAAO,CAACiB,gBAAf,KAAoC,WAAxC,EAAqD;AACnD,WAAKA,gBAAL,GAAwBjB,OAAO,CAACiB,gBAAhC;AACD;;AACD,QAAI,OAAOjB,OAAO,CAACmB,QAAf,KAA4B,WAAhC,EAA6C;AAC3C,WAAKA,QAAL,GAAgBnB,OAAO,CAACmB,QAAxB;AACD;;AACD,QAAI,OAAOnB,OAAO,CAACkB,OAAf,KAA2B,WAA/B,EAA4C;AAC1C,WAAKC,QAAL,GAAgB,CAACnB,OAAO,CAACkB,OAAzB;AACD;;AACD,QAAI,OAAOlB,OAAO,CAACsB,sBAAf,KAA0C,WAA9C,EAA2D;AACzD,WAAKA,sBAAL,GAA8BtB,OAAO,CAACsB,sBAAtC;AACD;;AAED,QAAI,KAAKC,GAAT,EAAc;AACZ,WAAKmG,IAAL;AACD;AACF,GAxdH;;AAAA,SA0dEG,UA1dF,GA0dE,oBAAWxH,OAAX;AACE,SAAKA,OAAL,GAAeA,OAAf;;AAEA,QAAI,KAAKkB,GAAT,EAAc;AACZ,UAAI,KAAKC,aAAT,EAAwB;AACtBtB,QAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKxG,aAAtC;AACA,aAAKA,aAAL,GAAqB,IAArB;AACD,OAJW;;;AAOZ,UAAI,CAAC,KAAKK,aAAV,EAAyB;AACvB,aAAKN,GAAL,CAASwB,KAAT,CAAeC,KAAf,GAAuB,EAAvB;AACD;;AAED,UAAI,OAAO3C,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,aAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,KAAwBrC,OAA7C;AACD,OAFD,MAEO;AACL,aAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,EAArB;AACA,aAAKnB,GAAL,CAASoB,WAAT,CAAqBtC,OAArB;AACD,OAhBW;AAmBZ;;;AACA,UAAI,CAAC,KAAKwB,aAAV,EAAyB;AACvB,aAAKN,GAAL,CAASwB,KAAT,CAAeC,KAAf,GAAuB,KAAKzB,GAAL,CAAS0B,WAAT,GAAuB,IAA9C;;AACA,YAAI,OAAO5C,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,eAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,KAAwBrC,OAA7C;AACD,SAFD,MAEO;AACL,eAAKkB,GAAL,CAASkB,SAAT,GAAqB,KAAKC,cAAL,EAArB;AACA,eAAKnB,GAAL,CAASoB,WAAT,CAAqBtC,OAArB;AACD;AACF;;AAED,WAAKyC,eAAL;AACD;AAED;;;;;;;AAKA5C,IAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6B,OAAlB,CAA0B,IAA1B,EAAgC,iBAAhC;AACD,GApgBH;;AAAA,SAsgBEiE,WAtgBF,GAsgBE,qBAAYG,MAAZ;AACE,SAAKvH,QAAL,GAAgBuH,MAAhB;;AAEA,QAAI,KAAK1G,GAAT,EAAc;AACZ,WAAKmG,IAAL;AACD;AAED;;;;;;;AAKAxH,IAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6B,OAAlB,CAA0B,IAA1B,EAAgC,kBAAhC;AACD,GAnhBH;;AAAA,SAqhBEqE,UArhBF,GAqhBE,oBAAWC,SAAX;AACE,SAAKhH,QAAL,GAAgB,CAACgH,SAAjB;;AACA,QAAI,KAAK5G,GAAT,EAAc;AACZ,WAAKA,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,KAAKrF,QAAL,GAAgB,QAAhB,GAA2B,SAAvD;AACD;AACF,GA1hBH;;AAAA,SA4hBE4G,SA5hBF,GA4hBE,mBAAUK,KAAV;AACE,SAAKxH,MAAL,GAAcwH,KAAd;;AAEA,QAAI,KAAK7G,GAAT,EAAc;AACZ,WAAKA,GAAL,CAASwB,KAAT,CAAenC,MAAf,GAAwBwH,KAAK,GAAG,EAAhC;AACD;AAED;;;;;;;AAKAlI,IAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6B,OAAlB,CAA0B,IAA1B,EAAgC,gBAAhC;AACD,GAziBH;;AAAA,SA2iBEwE,UA3iBF,GA2iBE;AACE,WAAO,KAAKhI,OAAZ;AACD,GA7iBH;;AAAA,SA+iBEiI,WA/iBF,GA+iBE;AACE,WAAO,KAAK5H,QAAZ;AACD,GAjjBH;;AAAA,SAmjBE6H,SAnjBF,GAmjBE;AACE,WAAO,KAAK3H,MAAZ;AACD,GArjBH;;AAAA,SAujBE4H,UAvjBF,GAujBE;AACE;AACA;AACA,QAAMpE,GAAG,GAAwE,KAAKC,MAAL,EAAjF;AACA,QAAI8D,SAAJ;;AAEA,QAAI,OAAO/D,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA1C,EAAgD;AAC9C+D,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD,MAEO;AACLA,MAAAA,SAAS,GAAG,CAAC,KAAKhH,QAAlB;AACD;;AAED,WAAOgH,SAAP;AACD,GApkBH;;AAAA,SAskBEM,IAtkBF,GAskBE;AACE,SAAKtH,QAAL,GAAgB,KAAhB;;AACA,QAAI,KAAKI,GAAT,EAAc;AACZ,WAAKA,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,SAA5B;AACD;AACF,GA3kBH;;AAAA,SA6kBEkC,IA7kBF,GA6kBE;AACE,SAAKvH,QAAL,GAAgB,IAAhB;;AACA,QAAI,KAAKI,GAAT,EAAc;AACZ,WAAKA,GAAL,CAASwB,KAAT,CAAeyD,UAAf,GAA4B,QAA5B;AACD;AACF,GAllBH;;AAAA,SAolBEmC,IAplBF,GAolBE,cACEvE,GADF,EAEEwE,MAFF;;;AAIE,QAAIA,MAAJ,EAAY;AACV;AACA;AACA,WAAKlI,QAAL,GAAgBkI,MAAM,CAACN,WAAP,EAAhB;AACA,WAAK7G,YAAL,GAAoBvB,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6G,WAAlB,CAClBD,MADkB,EAElB,kBAFkB;AAIlB;AACE;AACA;AACA,YAAMlI,QAAQ,GAAGkI,MAAM,CAACN,WAAP,EAAjB;;AACA,QAAA,MAAI,CAACR,WAAL,CAAiBpH,QAAjB;AACD,OATiB,CAApB;AAYA,WAAKgB,WAAL,GAAmBxB,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkB6G,WAAlB,CACjBD,MADiB,EAEjB,aAFiB;AAIjB;AACE;AACA;AACA,QAAA,MAAI,CAACE,MAAL,CAAYF,MAAM,CAACxE,GAAnB;AACD,OARgB,CAAnB;AAUD;AAGD;;;AACA,SAAK0E,MAAL,CAAY1E,GAAZ;;AAEA,QAAI,KAAK7C,GAAT,EAAc;AACZ,WAAK+B,MAAL;AACD;AACF,GA3nBH;;AAAA,SA6nBEY,KA7nBF,GA6nBE;AACE,QAAI,KAAK1C,aAAT,EAAwB;AACtBtB,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKxG,aAAtC;AACA,WAAKA,aAAL,GAAqB,IAArB;AACD;;AAED,QAAI,KAAKI,cAAT,EAAyB;AACvB,WAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,cAAL,CAAoB6B,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;AACnDtD,QAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKpG,cAAL,CAAoB4B,CAApB,CAAjC;AACD;;AACD,WAAK5B,cAAL,GAAsB,IAAtB;AACD;;AAED,QAAI,KAAKH,YAAT,EAAuB;AACrBvB,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKvG,YAAtC;AACA,WAAKA,YAAL,GAAoB,IAApB;AACD;;AAED,QAAI,KAAKC,WAAT,EAAsB;AACpBxB,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKtG,WAAtC;AACA,WAAKA,WAAL,GAAmB,IAAnB;AACD;;AAED,QAAI,KAAKC,eAAT,EAA0B;AACxBzB,MAAAA,MAAM,CAACC,IAAP,CAAY6B,KAAZ,CAAkBgG,cAAlB,CAAiC,KAAKrG,eAAtC;AACA,WAAKA,eAAL,GAAuB,IAAvB;AACD;AAGD;;;AACA,SAAKmH,MAAL,CAAY,IAAZ;AACD,GA5pBH;;AAAA,SA8pBE7I,MA9pBF,GA8pBE,gBAAO8I,IAAP,EAAkBC,IAAlB;AACE,WAAO,SAASC,WAAT,CAAqBC,MAArB;AACL;AACA,WAAK,IAAMC,QAAX,IAAuBD,MAAM,CAACE,SAA9B,EAAyC;AACvC;AACA;AACA,YAAI,CAAC,KAAKA,SAAL,CAAelD,cAAf,CAA8BiD,QAA9B,CAAL,EAA8C;AAC5C;AACA;AACA,eAAKC,SAAL,CAAeD,QAAf,IAA2BD,MAAM,CAACE,SAAP,CAAiBD,QAAjB,CAA3B;AACD;AACF;AAGD;;;AACA,aAAO,IAAP;AACD,KAfM,CAeLE,KAfK,CAeCN,IAfD,EAeO,CAACC,IAAD,CAfP,CAAP;AAgBD,GA/qBH;;AAAA;AAAA;;;;"}