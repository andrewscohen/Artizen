{"version":3,"file":"infobox.umd.development.js","sources":["../src/InfoBox.tsx"],"sourcesContent":["/* global google */\n/* eslint-disable filenames/match-regex */\nimport { InfoBoxOptions } from './types'\n\nexport class InfoBox {\n  content: string | Node\n  disableAutoPan: boolean\n  maxWidth: number\n  pixelOffset: google.maps.Size\n  position: google.maps.LatLng\n  zIndex: number | undefined | null\n  boxClass: string\n  boxStyle: {\n    [key: string]: any\n  }\n  closeBoxMargin: string\n  closeBoxURL: string\n  infoBoxClearance: google.maps.Size\n  isHidden: boolean\n  alignBottom: boolean\n  pane: string\n  enableEventPropagation: boolean\n  div: HTMLDivElement | null\n  closeListener: google.maps.MapsEventListener | null\n  moveListener: google.maps.MapsEventListener | null\n  mapListener: google.maps.MapsEventListener | null\n  contextListener: google.maps.MapsEventListener | null\n  eventListeners: google.maps.MapsEventListener[] | null\n  fixedWidthSet: boolean | null\n\n  constructor(options: InfoBoxOptions = {}) {\n    this.extend(InfoBox, google.maps.OverlayView)\n\n    // Standard options (in common with google.maps.InfoWindow):\n    this.content = options.content || ''\n    this.disableAutoPan = options.disableAutoPan || false\n    this.maxWidth = options.maxWidth || 0\n    this.pixelOffset = options.pixelOffset || new google.maps.Size(0, 0)\n    this.position = options.position || new google.maps.LatLng(0, 0)\n    this.zIndex = options.zIndex || null\n\n    // Additional options (unique to InfoBox):\n    this.boxClass = options.boxClass || 'infoBox'\n    this.boxStyle = options.boxStyle || {}\n    this.closeBoxMargin = options.closeBoxMargin || '2px'\n    this.closeBoxURL = options.closeBoxURL || 'http://www.google.com/intl/en_us/mapfiles/close.gif'\n    if (options.closeBoxURL === '') {\n      this.closeBoxURL = ''\n    }\n    this.infoBoxClearance = options.infoBoxClearance || new google.maps.Size(1, 1)\n\n    if (typeof options.visible === 'undefined') {\n      if (typeof options.isHidden === 'undefined') {\n        options.visible = true\n      } else {\n        options.visible = !options.isHidden\n      }\n    }\n    this.isHidden = !options.visible\n\n    this.alignBottom = options.alignBottom || false\n    this.pane = options.pane || 'floatPane'\n    this.enableEventPropagation = options.enableEventPropagation || false\n\n    this.div = null\n    this.closeListener = null\n    this.moveListener = null\n    this.mapListener = null\n    this.contextListener = null\n    this.eventListeners = null\n    this.fixedWidthSet = null\n  }\n\n  createInfoBoxDiv(): void {\n    // This handler prevents an event in the InfoBox from being passed on to the map.\n    function cancelHandler(event: Event) {\n      event.cancelBubble = true\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n    }\n\n    // This handler ignores the current event in the InfoBox and conditionally prevents\n    // the event from being passed on to the map. It is used for the contextmenu event.\n    // eslint-disable-next-line  @getify/proper-arrows/this\n    const ignoreHandler = (event: Event) => {\n      event.returnValue = false\n\n      if (event.preventDefault) {\n        event.preventDefault()\n      }\n\n      if (!this.enableEventPropagation) {\n        cancelHandler(event)\n      }\n    }\n\n    if (!this.div) {\n      this.div = document.createElement('div')\n      this.setBoxStyle()\n\n      if (typeof this.content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + this.content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(this.content)\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const panes = this.getPanes()\n      panes[this.pane].appendChild(this.div) // Add the InfoBox div to the DOM\n\n      this.addClickHandler()\n\n      if (this.div.style.width) {\n        this.fixedWidthSet = true\n      } else {\n        if (this.maxWidth !== 0 && this.div.offsetWidth > this.maxWidth) {\n          this.div.style.width = this.maxWidth + 'px'\n          this.fixedWidthSet = true\n        } else {\n          // The following code is needed to overcome problems with MSIE\n          const bw = this.getBoxWidths()\n          this.div.style.width = this.div.offsetWidth - bw.left - bw.right + 'px'\n          this.fixedWidthSet = false\n        }\n      }\n\n      this.panBox(this.disableAutoPan)\n\n      if (!this.enableEventPropagation) {\n        this.eventListeners = []\n\n        // Cancel event propagation.\n        // Note: mousemove not included (to resolve Issue 152)\n        const events = [\n          'mousedown',\n          'mouseover',\n          'mouseout',\n          'mouseup',\n          'click',\n          'dblclick',\n          'touchstart',\n          'touchend',\n          'touchmove',\n        ]\n\n        for (let i = 0; i < events.length; i++) {\n          this.eventListeners.push(\n            google.maps.event.addDomListener(this.div, events[i], cancelHandler)\n          )\n        }\n\n        // Workaround for Google bug that causes the cursor to change to a pointer\n        // when the mouse moves over a marker underneath InfoBox.\n        this.eventListeners.push(\n          google.maps.event.addDomListener(\n            this.div,\n            'mouseover',\n            // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n            () => {\n              if (this.div) {\n                this.div.style.cursor = 'default'\n              }\n            }\n          )\n        )\n      }\n\n      this.contextListener = google.maps.event.addDomListener(\n        this.div,\n        'contextmenu',\n        ignoreHandler\n      )\n\n      /**\n       * This event is fired when the DIV containing the InfoBox's content is attached to the DOM.\n       * @name InfoBox#domready\n       * @event\n       */\n      google.maps.event.trigger(this, 'domready')\n    }\n  }\n\n  getCloseBoxImg(): string {\n    let img = ''\n\n    if (this.closeBoxURL !== '') {\n      img = '<img alt=\"\"'\n      img += ' aria-hidden=\"true\"'\n      img += \" src='\" + this.closeBoxURL + \"'\"\n      img += ' align=right' // Do this because Opera chokes on style='float: right;'\n      img += \" style='\"\n      img += ' position: relative;' // Required by MSIE\n      img += ' cursor: pointer;'\n      img += ' margin: ' + this.closeBoxMargin + ';'\n      img += \"'>\"\n    }\n\n    return img\n  }\n\n  addClickHandler(): void {\n    if (this.div && this.div.firstChild && this.closeBoxURL !== '') {\n      const closeBox = this.div.firstChild\n      this.closeListener = google.maps.event.addDomListener(\n        closeBox,\n        'click',\n        this.getCloseClickHandler()\n      )\n    } else {\n      this.closeListener = null\n    }\n  }\n\n  getCloseClickHandler() {\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    return (event: Event) => {\n      // 1.0.3 fix: Always prevent propagation of a close box click to the map:\n      event.cancelBubble = true\n\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n\n      /**\n       * This event is fired when the InfoBox's close box is clicked.\n       * @name InfoBox#closeclick\n       * @event\n       */\n      google.maps.event.trigger(this, 'closeclick')\n\n      this.close()\n    }\n  }\n\n  panBox(disablePan?: boolean): void {\n    if (this.div && !disablePan) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n\n      // Only pan if attached to map, not panorama\n      if (map instanceof google.maps.Map) {\n        let xOffset = 0\n        let yOffset = 0\n\n        const bounds = map.getBounds()\n        if (bounds && !bounds.contains(this.position)) {\n          // Marker not in visible area of map, so set center\n          // of map to the marker position first.\n          map.setCenter(this.position)\n        }\n\n        const mapDiv = map.getDiv()\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapWidth = mapDiv.offsetWidth\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapHeight = mapDiv.offsetHeight\n        const iwOffsetX = this.pixelOffset.width\n        const iwOffsetY = this.pixelOffset.height\n        const iwWidth = this.div.offsetWidth\n        const iwHeight = this.div.offsetHeight\n        const padX = this.infoBoxClearance.width\n        const padY = this.infoBoxClearance.height\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const projection: google.maps.MapCanvasProjection = this.getProjection()\n        const pixPosition = projection.fromLatLngToContainerPixel(this.position)\n\n        if (pixPosition.x < -iwOffsetX + padX) {\n          xOffset = pixPosition.x + iwOffsetX - padX\n        } else if (pixPosition.x + iwWidth + iwOffsetX + padX > mapWidth) {\n          xOffset = pixPosition.x + iwWidth + iwOffsetX + padX - mapWidth\n        }\n        if (this.alignBottom) {\n          if (pixPosition.y < -iwOffsetY + padY + iwHeight) {\n            yOffset = pixPosition.y + iwOffsetY - padY - iwHeight\n          } else if (pixPosition.y + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwOffsetY + padY - mapHeight\n          }\n        } else {\n          if (pixPosition.y < -iwOffsetY + padY) {\n            yOffset = pixPosition.y + iwOffsetY - padY\n          } else if (pixPosition.y + iwHeight + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwHeight + iwOffsetY + padY - mapHeight\n          }\n        }\n\n        if (!(xOffset === 0 && yOffset === 0)) {\n          // Move the map to the shifted center.\n          map.panBy(xOffset, yOffset)\n        }\n      }\n    }\n  }\n\n  setBoxStyle(): void {\n    if (this.div) {\n      // Apply style values from the style sheet defined in the boxClass parameter:\n      this.div.className = this.boxClass\n\n      // Clear existing inline style values:\n      this.div.style.cssText = ''\n\n      // Apply style values defined in the boxStyle parameter:\n      const boxStyle = this.boxStyle\n      for (const i in boxStyle) {\n        if (boxStyle.hasOwnProperty(i)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.div.style[i] = boxStyle[i]\n        }\n      }\n\n      // Fix for iOS disappearing InfoBox problem\n      // See http://stackoverflow.com/questions/9229535/google-maps-markers-disappear-at-certain-zoom-level-only-on-iphone-ipad\n      this.div.style.webkitTransform = 'translateZ(0)'\n\n      // Fix up opacity style for benefit of MSIE\n      if (typeof this.div.style.opacity !== 'undefined' && this.div.style.opacity !== '') {\n        // See http://www.quirksmode.org/css/opacity.html\n        const opacity = parseFloat(this.div.style.opacity || '')\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.div.style.msFilter =\n          '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity * 100 + ')\"'\n        this.div.style.filter = 'alpha(opacity=' + opacity * 100 + ')'\n      }\n\n      // Apply required styles\n      this.div.style.position = 'absolute'\n      this.div.style.visibility = 'hidden'\n      if (this.zIndex !== null) {\n        this.div.style.zIndex = this.zIndex + ''\n      }\n      if (!this.div.style.overflow) {\n        this.div.style.overflow = 'auto'\n      }\n    }\n  }\n\n  getBoxWidths(): { bottom: number; left: number; right: number; top: number } {\n    const bw = { top: 0, bottom: 0, left: 0, right: 0 }\n\n    if (!this.div) {\n      return bw\n    }\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      const ownerDocument = this.div.ownerDocument\n      const computedStyle =\n        ownerDocument && ownerDocument.defaultView\n          ? ownerDocument.defaultView.getComputedStyle(this.div, '')\n          : null\n\n      if (computedStyle) {\n        // The computed styles are always in pixel units (good!)\n        bw.top = parseInt(computedStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(computedStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(computedStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(computedStyle.borderRightWidth || '', 10) || 0\n      }\n    } else if (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      document.documentElement.currentStyle // MSIE\n    ) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const currentStyle = this.div.currentStyle\n\n      if (currentStyle) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // The current styles may not be in pixel units, but assume they are (bad!)\n        bw.top = parseInt(currentStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(currentStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(currentStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(currentStyle.borderRightWidth || '', 10) || 0\n      }\n    }\n\n    return bw\n  }\n\n  onRemove(): void {\n    if (this.div && this.div.parentNode) {\n      this.div.parentNode.removeChild(this.div)\n      this.div = null\n    }\n  }\n\n  draw(): void {\n    this.createInfoBoxDiv()\n\n    if (this.div) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const projection: google.maps.MapCanvasProjection = this.getProjection()\n      const pixPosition = projection.fromLatLngToDivPixel(this.position)\n\n      this.div.style.left = pixPosition.x + this.pixelOffset.width + 'px'\n\n      if (this.alignBottom) {\n        this.div.style.bottom = -(pixPosition.y + this.pixelOffset.height) + 'px'\n      } else {\n        this.div.style.top = pixPosition.y + this.pixelOffset.height + 'px'\n      }\n\n      if (this.isHidden) {\n        this.div.style.visibility = 'hidden'\n      } else {\n        this.div.style.visibility = 'visible'\n      }\n    }\n  }\n\n  setOptions(options: InfoBoxOptions = {}): void {\n    if (typeof options.boxClass !== 'undefined') {\n      // Must be first\n      this.boxClass = options.boxClass\n      this.setBoxStyle()\n    }\n    if (typeof options.boxStyle !== 'undefined') {\n      // Must be second\n      this.boxStyle = options.boxStyle\n      this.setBoxStyle()\n    }\n    if (typeof options.content !== 'undefined') {\n      this.setContent(options.content)\n    }\n    if (typeof options.disableAutoPan !== 'undefined') {\n      this.disableAutoPan = options.disableAutoPan\n    }\n    if (typeof options.maxWidth !== 'undefined') {\n      this.maxWidth = options.maxWidth\n    }\n    if (typeof options.pixelOffset !== 'undefined') {\n      this.pixelOffset = options.pixelOffset\n    }\n    if (typeof options.alignBottom !== 'undefined') {\n      this.alignBottom = options.alignBottom\n    }\n    if (typeof options.position !== 'undefined') {\n      this.setPosition(options.position)\n    }\n    if (typeof options.zIndex !== 'undefined') {\n      this.setZIndex(options.zIndex)\n    }\n    if (typeof options.closeBoxMargin !== 'undefined') {\n      this.closeBoxMargin = options.closeBoxMargin\n    }\n    if (typeof options.closeBoxURL !== 'undefined') {\n      this.closeBoxURL = options.closeBoxURL\n    }\n    if (typeof options.infoBoxClearance !== 'undefined') {\n      this.infoBoxClearance = options.infoBoxClearance\n    }\n    if (typeof options.isHidden !== 'undefined') {\n      this.isHidden = options.isHidden\n    }\n    if (typeof options.visible !== 'undefined') {\n      this.isHidden = !options.visible\n    }\n    if (typeof options.enableEventPropagation !== 'undefined') {\n      this.enableEventPropagation = options.enableEventPropagation\n    }\n\n    if (this.div) {\n      this.draw()\n    }\n  }\n\n  setContent(content: string | Node): void {\n    this.content = content\n\n    if (this.div) {\n      if (this.closeListener) {\n        google.maps.event.removeListener(this.closeListener)\n        this.closeListener = null\n      }\n\n      // Odd code required to make things work with MSIE.\n      if (!this.fixedWidthSet) {\n        this.div.style.width = ''\n      }\n\n      if (typeof content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(content)\n      }\n\n      // Perverse code required to make things work with MSIE.\n      // (Ensures the close box does, in fact, float to the right.)\n      if (!this.fixedWidthSet) {\n        this.div.style.width = this.div.offsetWidth + 'px'\n        if (typeof content === 'string') {\n          this.div.innerHTML = this.getCloseBoxImg() + content\n        } else {\n          this.div.innerHTML = this.getCloseBoxImg()\n          this.div.appendChild(content)\n        }\n      }\n\n      this.addClickHandler()\n    }\n\n    /**\n     * This event is fired when the content of the InfoBox changes.\n     * @name InfoBox#content_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'content_changed')\n  }\n\n  setPosition(latLng: google.maps.LatLng): void {\n    this.position = latLng\n\n    if (this.div) {\n      this.draw()\n    }\n\n    /**\n     * This event is fired when the position of the InfoBox changes.\n     * @name InfoBox#position_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'position_changed')\n  }\n\n  setVisible(isVisible: boolean): void {\n    this.isHidden = !isVisible\n    if (this.div) {\n      this.div.style.visibility = this.isHidden ? 'hidden' : 'visible'\n    }\n  }\n\n  setZIndex(index: number): void {\n    this.zIndex = index\n\n    if (this.div) {\n      this.div.style.zIndex = index + ''\n    }\n\n    /**\n     * This event is fired when the zIndex of the InfoBox changes.\n     * @name InfoBox#zindex_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'zindex_changed')\n  }\n\n  getContent(): string | Node {\n    return this.content\n  }\n\n  getPosition(): google.maps.LatLng {\n    return this.position\n  }\n\n  getZIndex(): number | null | undefined {\n    return this.zIndex\n  }\n\n  getVisible(): boolean {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n    let isVisible\n\n    if (typeof map === 'undefined' || map === null) {\n      isVisible = false\n    } else {\n      isVisible = !this.isHidden\n    }\n\n    return isVisible\n  }\n\n  show(): void {\n    this.isHidden = false\n    if (this.div) {\n      this.div.style.visibility = 'visible'\n    }\n  }\n\n  hide(): void {\n    this.isHidden = true\n    if (this.div) {\n      this.div.style.visibility = 'hidden'\n    }\n  }\n\n  open(\n    map: google.maps.Map | google.maps.StreetViewPanorama,\n    anchor?: google.maps.MVCObject\n  ): void {\n    if (anchor) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.position = anchor.getPosition()\n      this.moveListener = google.maps.event.addListener(\n        anchor,\n        'position_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          const position = anchor.getPosition()\n          this.setPosition(position)\n        }\n      )\n\n      this.mapListener = google.maps.event.addListener(\n        anchor,\n        'map_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.setMap(anchor.map)\n        }\n      )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(map)\n\n    if (this.div) {\n      this.panBox()\n    }\n  }\n\n  close() {\n    if (this.closeListener) {\n      google.maps.event.removeListener(this.closeListener)\n      this.closeListener = null\n    }\n\n    if (this.eventListeners) {\n      for (let i = 0; i < this.eventListeners.length; i++) {\n        google.maps.event.removeListener(this.eventListeners[i])\n      }\n      this.eventListeners = null\n    }\n\n    if (this.moveListener) {\n      google.maps.event.removeListener(this.moveListener)\n      this.moveListener = null\n    }\n\n    if (this.mapListener) {\n      google.maps.event.removeListener(this.mapListener)\n      this.mapListener = null\n    }\n\n    if (this.contextListener) {\n      google.maps.event.removeListener(this.contextListener)\n      this.contextListener = null\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(null)\n  }\n\n  extend(obj1: any, obj2: any): any {\n    return function applyExtend(object: any) {\n      // eslint-disable-next-line guard-for-in\n      for (const property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        if (!this.prototype.hasOwnProperty(property)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.prototype[property] = object.prototype[property]\n        }\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      return this\n    }.apply(obj1, [obj2])\n  }\n}\n"],"names":["InfoBox","options","extend","google","maps","OverlayView","content","disableAutoPan","maxWidth","pixelOffset","Size","position","LatLng","zIndex","boxClass","boxStyle","closeBoxMargin","closeBoxURL","infoBoxClearance","visible","isHidden","alignBottom","pane","enableEventPropagation","div","closeListener","moveListener","mapListener","contextListener","eventListeners","fixedWidthSet","createInfoBoxDiv","cancelHandler","event","cancelBubble","stopPropagation","ignoreHandler","returnValue","preventDefault","document","createElement","setBoxStyle","innerHTML","getCloseBoxImg","appendChild","panes","getPanes","addClickHandler","style","width","offsetWidth","bw","getBoxWidths","left","right","panBox","events","i","length","push","addDomListener","cursor","trigger","img","firstChild","closeBox","getCloseClickHandler","close","disablePan","map","getMap","Map","xOffset","yOffset","bounds","getBounds","contains","setCenter","mapDiv","getDiv","mapWidth","mapHeight","offsetHeight","iwOffsetX","iwOffsetY","height","iwWidth","iwHeight","padX","padY","projection","getProjection","pixPosition","fromLatLngToContainerPixel","x","y","panBy","className","cssText","hasOwnProperty","webkitTransform","opacity","parseFloat","msFilter","filter","visibility","overflow","top","bottom","defaultView","getComputedStyle","ownerDocument","computedStyle","parseInt","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","documentElement","currentStyle","onRemove","parentNode","removeChild","draw","fromLatLngToDivPixel","setOptions","setContent","setPosition","setZIndex","removeListener","latLng","setVisible","isVisible","index","getContent","getPosition","getZIndex","getVisible","show","hide","open","anchor","addListener","setMap","obj1","obj2","applyExtend","object","property","prototype","apply"],"mappings":"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"}