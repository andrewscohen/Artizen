{"version":3,"file":"markerclusterer.umd.development.js","sources":["../src/ClusterIcon.tsx","../src/Cluster.tsx","../src/Clusterer.tsx"],"sourcesContent":["/* global google */\n/* eslint-disable filenames/match-regex */\nimport { Cluster } from './Cluster'\n\nimport { ClusterIconStyle, ClusterIconInfo } from './types'\n\nexport class ClusterIcon {\n  cluster: Cluster\n  className: string\n  styles: ClusterIconStyle[]\n  center: google.maps.LatLng | undefined\n  div: HTMLDivElement | null\n  sums: ClusterIconInfo | null\n  visible: boolean\n  url: string\n  height: number\n  width: number\n  anchorText: number[]\n  anchorIcon: number[]\n  textColor: string\n  textSize: number\n  textDecoration: string\n  fontWeight: string\n  fontStyle: string\n  fontFamily: string\n  backgroundPosition: string\n\n  boundsChangedListener: google.maps.MapsEventListener | null\n\n  constructor(cluster: Cluster, styles: ClusterIconStyle[]) {\n    cluster.getClusterer().extend(ClusterIcon, google.maps.OverlayView)\n    this.cluster = cluster\n    this.className = this.cluster.getClusterer().getClusterClass()\n    this.styles = styles\n    this.center = undefined\n    this.div = null\n    this.sums = null\n    this.visible = false\n    this.boundsChangedListener = null\n    this.url = ''\n    this.height = 0\n    this.width = 0\n    this.anchorText = [0, 0]\n    this.anchorIcon = [0, 0]\n    this.textColor = 'black'\n    this.textSize = 11\n    this.textDecoration = 'none'\n    this.fontWeight = 'bold'\n    this.fontStyle = 'normal'\n    this.fontFamily = 'Arial,sans-serif'\n    this.backgroundPosition = '0 0'\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(cluster.getMap()) // Note: this causes onAdd to be called\n  }\n\n  onAdd() {\n    let cMouseDownInCluster: boolean\n    let cDraggingMapByCluster: boolean\n\n    this.div = document.createElement('div')\n    this.div.className = this.className\n    if (this.visible) {\n      this.show()\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.getPanes().overlayMouseTarget.appendChild(this.div)\n\n    // Fix for Issue 157\n    this.boundsChangedListener = google.maps.event.addListener(\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.getMap(),\n      'boundschanged',\n      function boundsChanged() {\n        cDraggingMapByCluster = cMouseDownInCluster\n      }\n    )\n\n    google.maps.event.addDomListener(this.div, 'mousedown', function onMouseDown() {\n      cMouseDownInCluster = true\n      cDraggingMapByCluster = false\n    })\n\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    google.maps.event.addDomListener(\n      this.div,\n      'click',\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      (event: Event) => {\n        cMouseDownInCluster = false\n\n        if (!cDraggingMapByCluster) {\n          const markerClusterer = this.cluster.getClusterer()\n\n          /**\n           * This event is fired when a cluster marker is clicked.\n           * @name MarkerClusterer#click\n           * @param {Cluster} c The cluster that was clicked.\n           * @event\n           */\n          google.maps.event.trigger(markerClusterer, 'click', this.cluster)\n          google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster) // deprecated name\n\n          // The default click handler follows. Disable it by setting\n          // the zoomOnClick property to false.\n          if (markerClusterer.getZoomOnClick()) {\n            // Zoom into the cluster.\n            const maxZoom = markerClusterer.getMaxZoom()\n\n            const bounds = this.cluster.getBounds()\n\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            markerClusterer.getMap().fitBounds(bounds)\n\n            // There is a fix for Issue 170 here:\n            setTimeout(function timeout() {\n              // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n              // @ts-ignore\n              markerClusterer.getMap().fitBounds(bounds)\n\n              // Don't zoom beyond the max zoom level\n              // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n              // @ts-ignore\n              if (maxZoom !== null && markerClusterer.getMap().getZoom() > maxZoom) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n                // @ts-ignore\n                markerClusterer.getMap().setZoom(maxZoom + 1)\n              }\n            }, 100)\n          }\n\n          // Prevent event propagation to the map:\n          event.cancelBubble = true\n\n          if (event.stopPropagation) {\n            event.stopPropagation()\n          }\n        }\n      }\n    )\n\n    google.maps.event.addDomListener(\n      this.div,\n      'mouseover',\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      () => {\n        /**\n         * This event is fired when the mouse moves over a cluster marker.\n         * @name MarkerClusterer#mouseover\n         * @param {Cluster} c The cluster that the mouse moved over.\n         * @event\n         */\n        google.maps.event.trigger(this.cluster.getClusterer(), 'mouseover', this.cluster)\n      }\n    )\n\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    google.maps.event.addDomListener(\n      this.div,\n      'mouseout',\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      () => {\n        /**\n         * This event is fired when the mouse moves out of a cluster marker.\n         * @name MarkerClusterer#mouseout\n         * @param {Cluster} c The cluster that the mouse moved out of.\n         * @event\n         */\n        google.maps.event.trigger(this.cluster.getClusterer(), 'mouseout', this.cluster)\n      }\n    )\n  }\n\n  onRemove() {\n    if (this.div && this.div.parentNode) {\n      this.hide()\n\n      if (this.boundsChangedListener !== null) {\n        google.maps.event.removeListener(this.boundsChangedListener)\n      }\n\n      google.maps.event.clearInstanceListeners(this.div)\n\n      this.div.parentNode.removeChild(this.div)\n\n      this.div = null\n    }\n  }\n\n  draw() {\n    if (this.visible && this.div !== null && this.center) {\n      const { x, y } = this.getPosFromLatLng(this.center)\n\n      this.div.style.top = y + 'px'\n      this.div.style.left = x + 'px'\n    }\n  }\n\n  hide() {\n    if (this.div) {\n      this.div.style.display = 'none'\n    }\n\n    this.visible = false\n  }\n\n  show() {\n    if (this.div && this.center) {\n      let img = '',\n        divTitle = ''\n\n      // NOTE: values must be specified in px units\n      const bp = this.backgroundPosition.split(' ')\n\n      const spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, ''), 10)\n\n      const spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, ''), 10)\n\n      const pos = this.getPosFromLatLng(this.center)\n\n      if (this.sums === null || typeof this.sums.title === 'undefined' || this.sums.title === '') {\n        divTitle = this.cluster.getClusterer().getTitle()\n      } else {\n        divTitle = this.sums.title\n      }\n\n      this.div.style.cssText = this.createCss(pos)\n\n      img =\n        \"<img alt='\" +\n        divTitle +\n        \"' src='\" +\n        this.url +\n        \"' style='position: absolute; top: \" +\n        spriteV +\n        'px; left: ' +\n        spriteH +\n        'px; '\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      //@ts-ignore\n      if (!this.cluster.getClusterer().enableRetinaIcons) {\n        img +=\n          'clip: rect(' +\n          -1 * spriteV +\n          'px, ' +\n          (-1 * spriteH + this.width) +\n          'px, ' +\n          (-1 * spriteV + this.height) +\n          'px, ' +\n          -1 * spriteH +\n          'px);'\n      }\n\n      img += \"'>\"\n\n      this.div.innerHTML =\n        img +\n        \"<div style='\" +\n        'position: absolute;' +\n        'top: ' +\n        this.anchorText[0] +\n        'px;' +\n        'left: ' +\n        this.anchorText[1] +\n        'px;' +\n        'color: ' +\n        this.textColor +\n        ';' +\n        'font-size: ' +\n        this.textSize +\n        'px;' +\n        'font-family: ' +\n        this.fontFamily +\n        ';' +\n        'font-weight: ' +\n        this.fontWeight +\n        ';' +\n        'font-style: ' +\n        this.fontStyle +\n        ';' +\n        'text-decoration: ' +\n        this.textDecoration +\n        ';' +\n        'text-align: center;' +\n        'width: ' +\n        this.width +\n        'px;' +\n        'line-height:' +\n        this.height +\n        'px;' +\n        \"'>\" +\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.sums.text +\n        '</div>'\n\n      this.div.title = divTitle\n\n      this.div.style.display = ''\n    }\n\n    this.visible = true\n  }\n\n  useStyle(sums: ClusterIconInfo) {\n    this.sums = sums\n\n    const style = this.styles[Math.min(this.styles.length - 1, Math.max(0, sums.index - 1))]\n\n    this.url = style.url\n    this.height = style.height\n    this.width = style.width\n    this.anchorText = style.anchorText || [0, 0]\n    this.anchorIcon = style.anchorIcon || [this.height / 2, this.width / 2]\n\n    this.textColor = style.textColor || 'black'\n\n    this.textSize = style.textSize || 11\n\n    this.textDecoration = style.textDecoration || 'none'\n\n    this.fontWeight = style.fontWeight || 'bold'\n\n    this.fontStyle = style.fontStyle || 'normal'\n\n    this.fontFamily = style.fontFamily || 'Arial,sans-serif'\n\n    this.backgroundPosition = style.backgroundPosition || '0 0'\n  }\n\n  setCenter(center: google.maps.LatLng) {\n    this.center = center\n  }\n\n  createCss(pos: google.maps.Point): string {\n    const style = []\n\n    style.push('cursor: pointer;')\n\n    style.push('position: absolute; top: ' + pos.y + 'px; left: ' + pos.x + 'px;')\n\n    style.push('width: ' + this.width + 'px; height: ' + this.height + 'px;')\n\n    return style.join('')\n  }\n\n  getPosFromLatLng(latlng: google.maps.LatLng): google.maps.Point {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    const pos = this.getProjection().fromLatLngToDivPixel(latlng)\n\n    pos.x -= this.anchorIcon[1]\n\n    pos.y -= this.anchorIcon[0]\n\n    // pos.x = pos.x\n\n    // pos.y = pos.y\n\n    return pos\n  }\n}\n","/* global google */\n/* eslint-disable filenames/match-regex */\nimport { Clusterer } from './Clusterer'\n\nimport { ClusterIcon } from './ClusterIcon'\n\nimport { MarkerExtended } from './types'\n\nexport class Cluster {\n  markerClusterer: Clusterer\n  map: google.maps.Map | google.maps.StreetViewPanorama\n  gridSize: number\n  minClusterSize: number\n  averageCenter: boolean\n  markers: MarkerExtended[]\n  center: google.maps.LatLng | undefined\n  bounds: google.maps.LatLngBounds | null\n  clusterIcon: ClusterIcon\n\n  constructor(markerClusterer: Clusterer) {\n    this.markerClusterer = markerClusterer\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.map = this.markerClusterer.getMap()\n\n    this.gridSize = this.markerClusterer.getGridSize()\n\n    this.minClusterSize = this.markerClusterer.getMinimumClusterSize()\n\n    this.averageCenter = this.markerClusterer.getAverageCenter()\n\n    this.markers = []\n\n    this.center = undefined\n\n    this.bounds = null\n\n    this.clusterIcon = new ClusterIcon(this, this.markerClusterer.getStyles())\n  }\n\n  getSize(): number {\n    return this.markers.length\n  }\n\n  getMarkers(): MarkerExtended[] {\n    return this.markers\n  }\n\n  getCenter(): google.maps.LatLng | undefined {\n    return this.center\n  }\n\n  getMap(): google.maps.Map | google.maps.StreetViewPanorama {\n    return this.map\n  }\n\n  getClusterer(): Clusterer {\n    return this.markerClusterer\n  }\n\n  getBounds(): google.maps.LatLngBounds {\n    const bounds = new google.maps.LatLngBounds(this.center, this.center)\n\n    const markers = this.getMarkers()\n\n    for (let i = 0; i < markers.length; i++) {\n      const position = markers[i].getPosition()\n\n      if (position) {\n        bounds.extend(position)\n      }\n    }\n\n    return bounds\n  }\n\n  remove() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.clusterIcon.setMap(null)\n\n    this.markers = []\n\n    // @ts-ignore\n    delete this.markers\n  }\n\n  addMarker(marker: MarkerExtended): boolean {\n    if (this.isMarkerAlreadyAdded(marker)) {\n      return false\n    }\n\n    if (!this.center) {\n      const position = marker.getPosition()\n\n      if (position) {\n        this.center = position\n\n        this.calculateBounds()\n      }\n    } else {\n      if (this.averageCenter) {\n        const position = marker.getPosition()\n\n        if (position) {\n          const length = this.markers.length + 1\n\n          this.center = new google.maps.LatLng(\n            (this.center.lat() * (length - 1) + position.lat()) / length,\n            (this.center.lng() * (length - 1) + position.lng()) / length\n          )\n\n          this.calculateBounds()\n        }\n      }\n    }\n\n    marker.isAdded = true\n\n    this.markers.push(marker)\n\n    const mCount = this.markers.length\n\n    const maxZoom = this.markerClusterer.getMaxZoom()\n\n    if (maxZoom !== null && this.map.getZoom() > maxZoom) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map)\n      }\n    } else if (mCount < this.minClusterSize) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map)\n      }\n    } else if (mCount === this.minClusterSize) {\n      // Hide the markers that were showing.\n      for (let i = 0; i < mCount; i++) {\n        this.markers[i].setMap(null)\n      }\n    } else {\n      marker.setMap(null)\n    }\n\n    return true\n  }\n\n  isMarkerInClusterBounds(marker: MarkerExtended): boolean {\n    if (this.bounds !== null) {\n      const position = marker.getPosition()\n\n      if (position) {\n        return this.bounds.contains(position)\n      }\n    }\n\n    return false\n  }\n\n  calculateBounds() {\n    this.bounds = this.markerClusterer.getExtendedBounds(\n      new google.maps.LatLngBounds(this.center, this.center)\n    )\n  }\n\n  updateIcon() {\n    const mCount = this.markers.length\n\n    const maxZoom = this.markerClusterer.getMaxZoom()\n\n    if (maxZoom !== null && this.map.getZoom() > maxZoom) {\n      this.clusterIcon.hide()\n\n      return\n    }\n\n    if (mCount < this.minClusterSize) {\n      // Min cluster size not yet reached.\n      this.clusterIcon.hide()\n\n      return\n    }\n\n    if (this.center) {\n      this.clusterIcon.setCenter(this.center)\n    }\n\n    this.clusterIcon.useStyle(\n      this.markerClusterer.getCalculator()(this.markers, this.markerClusterer.getStyles().length)\n    )\n\n    this.clusterIcon.show()\n  }\n\n  isMarkerAlreadyAdded(marker: MarkerExtended): boolean {\n    if (this.markers.includes) {\n      return this.markers.includes(marker)\n    } else {\n      for (let i = 0; i < this.markers.length; i++) {\n        if (marker === this.markers[i]) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n}\n","/* global google */\n/* eslint-disable filenames/match-regex */\nimport { Cluster } from './Cluster'\n\nimport {\n  MarkerExtended,\n  ClustererOptions,\n  ClusterIconStyle,\n  TCalculator,\n  ClusterIconInfo,\n} from './types'\n\nconst CALCULATOR = function CALCULATOR(\n  markers: MarkerExtended[],\n  numStyles: number\n): ClusterIconInfo {\n  let index = 0\n\n  const title = ''\n\n  const count = markers.length.toString()\n\n  let dv: string | number = count\n\n  while (dv !== 0) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    dv = parseInt(dv, 10) / 10\n\n    index++\n  }\n\n  index = Math.min(index, numStyles)\n\n  return {\n    text: count,\n    index: index,\n    title: title,\n  }\n}\n\nconst BATCH_SIZE = 2000\n\nconst BATCH_SIZE_IE = 500\n\nconst IMAGE_PATH =\n  'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'\n\nconst IMAGE_EXTENSION = 'png'\n\nconst IMAGE_SIZES = [53, 56, 66, 78, 90]\n\nconst CLUSTERER_CLASS = 'cluster'\n\nexport class Clusterer {\n  markers: MarkerExtended[]\n  clusters: Cluster[]\n  listeners: google.maps.MapsEventListener[]\n  activeMap: google.maps.Map | google.maps.StreetViewPanorama | null\n  ready: boolean\n  gridSize: number\n  minClusterSize: number\n  maxZoom: number | null\n  styles: ClusterIconStyle[]\n  title: string\n  zoomOnClick: boolean\n  averageCenter: boolean\n  ignoreHidden: boolean\n  enableRetinaIcons: boolean\n  imagePath: string\n  imageExtension: string\n  imageSizes: number[]\n  calculator: TCalculator\n  batchSize: number\n  batchSizeIE: number\n  clusterClass: string\n  timerRefStatic: number | null\n\n  constructor(\n    map: google.maps.Map,\n    optMarkers: MarkerExtended[] = [],\n    optOptions: ClustererOptions = {}\n  ) {\n    this.extend(Clusterer, google.maps.OverlayView)\n\n    this.markers = []\n    this.clusters = []\n    this.listeners = []\n    this.activeMap = null\n    this.ready = false\n    this.gridSize = optOptions.gridSize || 60\n    this.minClusterSize = optOptions.minimumClusterSize || 2\n    this.maxZoom = optOptions.maxZoom || null\n    this.styles = optOptions.styles || []\n\n    this.title = optOptions.title || ''\n\n    this.zoomOnClick = true\n\n    if (optOptions.zoomOnClick !== undefined) {\n      this.zoomOnClick = optOptions.zoomOnClick\n    }\n\n    this.averageCenter = false\n\n    if (optOptions.averageCenter !== undefined) {\n      this.averageCenter = optOptions.averageCenter\n    }\n\n    this.ignoreHidden = false\n\n    if (optOptions.ignoreHidden !== undefined) {\n      this.ignoreHidden = optOptions.ignoreHidden\n    }\n\n    this.enableRetinaIcons = false\n\n    if (optOptions.enableRetinaIcons !== undefined) {\n      this.enableRetinaIcons = optOptions.enableRetinaIcons\n    }\n    this.imagePath = optOptions.imagePath || IMAGE_PATH\n\n    this.imageExtension = optOptions.imageExtension || IMAGE_EXTENSION\n\n    this.imageSizes = optOptions.imageSizes || IMAGE_SIZES\n\n    this.calculator = optOptions.calculator || CALCULATOR\n\n    this.batchSize = optOptions.batchSize || BATCH_SIZE\n\n    this.batchSizeIE = optOptions.batchSizeIE || BATCH_SIZE_IE\n\n    this.clusterClass = optOptions.clusterClass || CLUSTERER_CLASS\n\n    if (navigator.userAgent.toLowerCase().indexOf('msie') !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize = this.batchSizeIE\n    }\n\n    this.timerRefStatic = null\n\n    this.setupStyles()\n\n    this.addMarkers(optMarkers, true)\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(map) // Note: this causes onAdd to be called\n  }\n\n  onAdd() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.activeMap = this.getMap()\n\n    this.ready = true\n\n    this.repaint()\n\n    // Add the map event listeners\n    this.listeners = [\n      google.maps.event.addListener(\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.getMap(),\n        'zoom_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.resetViewport(false)\n          // Workaround for this Google bug: when map is at level 0 and \"-\" of\n          // zoom slider is clicked, a \"zoom_changed\" event is fired even though\n          // the map doesn't zoom out any further. In this situation, no \"idle\"\n          // event is triggered so the cluster markers that have been removed\n          // do not get redrawn. Same goes for a zoom in at maxZoom.\n          if (\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            this.getMap().getZoom() === (this.get('minZoom') || 0) ||\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            this.getMap().getZoom() === this.get('maxZoom')\n          ) {\n            google.maps.event.trigger(this, 'idle')\n          }\n        }\n      ),\n      google.maps.event.addListener(\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.getMap(),\n        'idle',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.redraw()\n        }\n      ),\n    ]\n  }\n\n  // eslint-disable-next-line @getify/proper-arrows/this\n  onRemove() {\n    // Put all the managed markers back on the map:\n    for (let i = 0; i < this.markers.length; i++) {\n      if (this.markers[i].getMap() !== this.activeMap) {\n        this.markers[i].setMap(this.activeMap)\n      }\n    }\n\n    // Remove all clusters:\n    for (let i = 0; i < this.clusters.length; i++) {\n      this.clusters[i].remove()\n    }\n\n    this.clusters = []\n\n    // Remove map event listeners:\n    for (let i = 0; i < this.listeners.length; i++) {\n      google.maps.event.removeListener(this.listeners[i])\n    }\n\n    this.listeners = []\n\n    this.activeMap = null\n\n    this.ready = false\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  draw() {}\n\n  setupStyles() {\n    if (this.styles.length > 0) {\n      return\n    }\n\n    for (let i = 0; i < this.imageSizes.length; i++) {\n      this.styles.push({\n        url: this.imagePath + (i + 1) + '.' + this.imageExtension,\n        height: this.imageSizes[i],\n        width: this.imageSizes[i],\n      })\n    }\n  }\n\n  fitMapToMarkers() {\n    const markers = this.getMarkers()\n\n    const bounds = new google.maps.LatLngBounds()\n\n    for (let i = 0; i < markers.length; i++) {\n      const position = markers[i].getPosition()\n      if (position) {\n        bounds.extend(position)\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.getMap().fitBounds(bounds)\n  }\n\n  getGridSize(): number {\n    return this.gridSize\n  }\n\n  setGridSize(gridSize: number) {\n    this.gridSize = gridSize\n  }\n\n  getMinimumClusterSize(): number {\n    return this.minClusterSize\n  }\n\n  setMinimumClusterSize(minimumClusterSize: number) {\n    this.minClusterSize = minimumClusterSize\n  }\n\n  getMaxZoom(): number | null {\n    return this.maxZoom\n  }\n\n  setMaxZoom(maxZoom: number) {\n    this.maxZoom = maxZoom\n  }\n\n  getStyles(): ClusterIconStyle[] {\n    return this.styles\n  }\n\n  setStyles(styles: ClusterIconStyle[]) {\n    this.styles = styles\n  }\n\n  getTitle(): string {\n    return this.title\n  }\n\n  setTitle(title: string) {\n    this.title = title\n  }\n\n  getZoomOnClick(): boolean {\n    return this.zoomOnClick\n  }\n\n  setZoomOnClick(zoomOnClick: boolean) {\n    this.zoomOnClick = zoomOnClick\n  }\n\n  getAverageCenter(): boolean {\n    return this.averageCenter\n  }\n\n  setAverageCenter(averageCenter: boolean) {\n    this.averageCenter = averageCenter\n  }\n\n  getIgnoreHidden(): boolean {\n    return this.ignoreHidden\n  }\n\n  setIgnoreHidden(ignoreHidden: boolean) {\n    this.ignoreHidden = ignoreHidden\n  }\n\n  getEnableRetinaIcons(): boolean {\n    return this.enableRetinaIcons\n  }\n\n  setEnableRetinaIcons(enableRetinaIcons: boolean) {\n    this.enableRetinaIcons = enableRetinaIcons\n  }\n\n  getImageExtension(): string {\n    return this.imageExtension\n  }\n\n  setImageExtension(imageExtension: string) {\n    this.imageExtension = imageExtension\n  }\n\n  getImagePath(): string {\n    return this.imagePath\n  }\n\n  setImagePath(imagePath: string) {\n    this.imagePath = imagePath\n  }\n\n  getImageSizes(): number[] {\n    return this.imageSizes\n  }\n\n  setImageSizes(imageSizes: number[]) {\n    this.imageSizes = imageSizes\n  }\n\n  getCalculator(): TCalculator {\n    return this.calculator\n  }\n\n  setCalculator(calculator: TCalculator) {\n    this.calculator = calculator\n  }\n\n  getBatchSizeIE(): number {\n    return this.batchSizeIE\n  }\n\n  setBatchSizeIE(batchSizeIE: number) {\n    this.batchSizeIE = batchSizeIE\n  }\n\n  getClusterClass(): string {\n    return this.clusterClass\n  }\n\n  setClusterClass(clusterClass: string) {\n    this.clusterClass = clusterClass\n  }\n\n  getMarkers(): MarkerExtended[] {\n    return this.markers\n  }\n\n  getTotalMarkers(): number {\n    return this.markers.length\n  }\n\n  getClusters(): Cluster[] {\n    return this.clusters\n  }\n\n  getTotalClusters(): number {\n    return this.clusters.length\n  }\n\n  addMarker(marker: MarkerExtended, optNoDraw: boolean) {\n    this.pushMarkerTo(marker)\n\n    if (!optNoDraw) {\n      this.redraw()\n    }\n  }\n\n  addMarkers(markers: MarkerExtended[], optNoDraw: boolean) {\n    for (const key in markers) {\n      if (markers.hasOwnProperty(key)) {\n        this.pushMarkerTo(markers[key])\n      }\n    }\n\n    if (!optNoDraw) {\n      this.redraw()\n    }\n  }\n\n  pushMarkerTo(marker: MarkerExtended) {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      // eslint-disable-next-line @getify/proper-arrows/name, @getify/proper-arrows/this\n      google.maps.event.addListener(marker, 'dragend', () => {\n        if (this.ready) {\n          marker.isAdded = false\n\n          this.repaint()\n        }\n      })\n    }\n\n    marker.isAdded = false\n\n    this.markers.push(marker)\n  }\n\n  removeMarker_(marker: MarkerExtended): boolean {\n    let index = -1\n\n    if (this.markers.indexOf) {\n      index = this.markers.indexOf(marker)\n    } else {\n      for (let i = 0; i < this.markers.length; i++) {\n        if (marker === this.markers[i]) {\n          index = i\n\n          break\n        }\n      }\n    }\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false\n    }\n\n    marker.setMap(null)\n\n    this.markers.splice(index, 1) // Remove the marker from the list of managed markers\n\n    return true\n  }\n\n  removeMarker(marker: MarkerExtended, optNoDraw: boolean): boolean {\n    const removed = this.removeMarker_(marker)\n\n    if (!optNoDraw && removed) {\n      this.repaint()\n    }\n\n    return removed\n  }\n\n  removeMarkers(markers: MarkerExtended[], optNoDraw: boolean): boolean {\n    let removed = false\n\n    for (let i = 0; i < markers.length; i++) {\n      removed = removed || this.removeMarker_(markers[i])\n    }\n\n    if (!optNoDraw && removed) {\n      this.repaint()\n    }\n\n    return removed\n  }\n\n  clearMarkers() {\n    this.resetViewport(true)\n\n    this.markers = []\n  }\n\n  repaint() {\n    const oldClusters = this.clusters.slice()\n\n    this.clusters = []\n\n    this.resetViewport(false)\n\n    this.redraw()\n\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(function timeout() {\n      for (let i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove()\n      }\n    }, 0)\n  }\n\n  getExtendedBounds(bounds: google.maps.LatLngBounds): google.maps.LatLngBounds {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    const projection = this.getProjection()\n    // Convert the points to pixels and the extend out by the grid size.\n    const trPix = projection.fromLatLngToDivPixel(\n      // Turn the bounds into latlng.\n      new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getNorthEast().lng())\n    )\n\n    trPix.x += this.gridSize\n    trPix.y -= this.gridSize\n\n    const blPix = projection.fromLatLngToDivPixel(\n      // Turn the bounds into latlng.\n      new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng())\n    )\n\n    blPix.x -= this.gridSize\n    blPix.y += this.gridSize\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(\n      // Convert the pixel points back to LatLng nw\n      projection.fromDivPixelToLatLng(trPix)\n    )\n\n    bounds.extend(\n      // Convert the pixel points back to LatLng sw\n      projection.fromDivPixelToLatLng(blPix)\n    )\n\n    return bounds\n  }\n\n  redraw() {\n    // Redraws all the clusters.\n    this.createClusters(0)\n  }\n\n  resetViewport(optHide: boolean) {\n    // Remove all the clusters\n    for (let i = 0; i < this.clusters.length; i++) {\n      this.clusters[i].remove()\n    }\n\n    this.clusters = []\n\n    // Reset the markers to not be added and to be removed from the map.\n    for (let i = 0; i < this.markers.length; i++) {\n      const marker = this.markers[i]\n\n      marker.isAdded = false\n\n      if (optHide) {\n        marker.setMap(null)\n      }\n    }\n  }\n\n  distanceBetweenPoints(p1: google.maps.LatLng, p2: google.maps.LatLng): number {\n    const R = 6371 // Radius of the Earth in km\n\n    const dLat = ((p2.lat() - p1.lat()) * Math.PI) / 180\n    const dLon = ((p2.lng() - p1.lng()) * Math.PI) / 180\n\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((p1.lat() * Math.PI) / 180) *\n        Math.cos((p2.lat() * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2)\n\n    return R * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)))\n  }\n\n  isMarkerInBounds(marker: MarkerExtended, bounds: google.maps.LatLngBounds): boolean {\n    const position = marker.getPosition()\n\n    if (position) {\n      return bounds.contains(position)\n    }\n\n    return false\n  }\n\n  addToClosestCluster(marker: MarkerExtended) {\n    let cluster\n\n    let distance = 40000 // Some large number\n\n    let clusterToAddTo = null\n\n    for (let i = 0; i < this.clusters.length; i++) {\n      cluster = this.clusters[i]\n\n      const center = cluster.getCenter()\n\n      const position = marker.getPosition()\n\n      if (center && position) {\n        const d = this.distanceBetweenPoints(center, position)\n\n        if (d < distance) {\n          distance = d\n\n          clusterToAddTo = cluster\n        }\n      }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker)\n    } else {\n      cluster = new Cluster(this)\n\n      cluster.addMarker(marker)\n\n      this.clusters.push(cluster)\n    }\n  }\n\n  createClusters(iFirst: number) {\n    if (!this.ready) {\n      return\n    }\n\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      /**\n       * This event is fired when the <code>Clusterer</code> begins\n       *  clustering markers.\n       * @name Clusterer#clusteringbegin\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, 'clusteringbegin', this)\n\n      if (this.timerRefStatic !== null) {\n        window.clearTimeout(this.timerRefStatic)\n\n        // @ts-ignore\n        delete this.timerRefStatic\n      }\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    const mapBounds =\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.getMap().getZoom() > 3\n        ? new google.maps.LatLngBounds(\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            this.getMap()\n              .getBounds()\n              .getSouthWest(),\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            this.getMap()\n              .getBounds()\n              .getNorthEast()\n          )\n        : new google.maps.LatLngBounds(\n            new google.maps.LatLng(85.02070771743472, -178.48388434375),\n            new google.maps.LatLng(-85.08136444384544, 178.00048865625)\n          )\n\n    const bounds = this.getExtendedBounds(mapBounds)\n\n    const iLast = Math.min(iFirst + this.batchSize, this.markers.length)\n\n    for (let i = iFirst; i < iLast; i++) {\n      const marker = this.markers[i]\n\n      if (!marker.isAdded && this.isMarkerInBounds(marker, bounds)) {\n        if (!this.ignoreHidden || (this.ignoreHidden && marker.getVisible())) {\n          this.addToClosestCluster(marker)\n        }\n      }\n    }\n\n    if (iLast < this.markers.length) {\n      this.timerRefStatic = window.setTimeout(\n        // eslint-disable-next-line @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          this.createClusters(iLast)\n        },\n        0\n      )\n    } else {\n      this.timerRefStatic = null\n\n      /**\n       * This event is fired when the <code>Clusterer</code> stops\n       *  clustering markers.\n       * @name Clusterer#clusteringend\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, 'clusteringend', this)\n\n      for (let i = 0; i < this.clusters.length; i++) {\n        this.clusters[i].updateIcon()\n      }\n    }\n  }\n\n  extend(obj1: any, obj2: any): any {\n    return function applyExtend(object: any) {\n      // eslint-disable-next-line guard-for-in\n      for (const property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.prototype[property] = object.prototype[property]\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      return this\n    }.apply(obj1, [obj2])\n  }\n}\n"],"names":["ClusterIcon","cluster","styles","getClusterer","extend","google","maps","OverlayView","className","getClusterClass","center","undefined","div","sums","visible","boundsChangedListener","url","height","width","anchorText","anchorIcon","textColor","textSize","textDecoration","fontWeight","fontStyle","fontFamily","backgroundPosition","setMap","getMap","onAdd","cMouseDownInCluster","cDraggingMapByCluster","document","createElement","show","getPanes","overlayMouseTarget","appendChild","event","addListener","boundsChanged","addDomListener","onMouseDown","markerClusterer","trigger","getZoomOnClick","maxZoom","getMaxZoom","bounds","getBounds","fitBounds","setTimeout","timeout","getZoom","setZoom","cancelBubble","stopPropagation","onRemove","parentNode","hide","removeListener","clearInstanceListeners","removeChild","draw","getPosFromLatLng","x","y","style","top","left","display","img","divTitle","bp","split","spriteH","parseInt","replace","spriteV","pos","title","getTitle","cssText","createCss","enableRetinaIcons","innerHTML","text","useStyle","Math","min","length","max","index","setCenter","push","join","latlng","getProjection","fromLatLngToDivPixel","Cluster","map","gridSize","getGridSize","minClusterSize","getMinimumClusterSize","averageCenter","getAverageCenter","markers","clusterIcon","getStyles","getSize","getMarkers","getCenter","LatLngBounds","i","position","getPosition","remove","addMarker","marker","isMarkerAlreadyAdded","calculateBounds","LatLng","lat","lng","isAdded","mCount","isMarkerInClusterBounds","contains","getExtendedBounds","updateIcon","getCalculator","includes","CALCULATOR","numStyles","count","toString","dv","BATCH_SIZE","BATCH_SIZE_IE","IMAGE_PATH","IMAGE_EXTENSION","IMAGE_SIZES","CLUSTERER_CLASS","Clusterer","optMarkers","optOptions","clusters","listeners","activeMap","ready","minimumClusterSize","zoomOnClick","ignoreHidden","imagePath","imageExtension","imageSizes","calculator","batchSize","batchSizeIE","clusterClass","navigator","userAgent","toLowerCase","indexOf","timerRefStatic","setupStyles","addMarkers","repaint","resetViewport","get","redraw","fitMapToMarkers","setGridSize","setMinimumClusterSize","setMaxZoom","setStyles","setTitle","setZoomOnClick","setAverageCenter","getIgnoreHidden","setIgnoreHidden","getEnableRetinaIcons","setEnableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","optNoDraw","pushMarkerTo","key","hasOwnProperty","getDraggable","removeMarker_","splice","removeMarker","removed","removeMarkers","clearMarkers","oldClusters","slice","projection","trPix","getNorthEast","blPix","getSouthWest","fromDivPixelToLatLng","createClusters","optHide","distanceBetweenPoints","p1","p2","R","dLat","PI","dLon","a","sin","cos","atan2","sqrt","isMarkerInBounds","addToClosestCluster","distance","clusterToAddTo","d","iFirst","window","clearTimeout","mapBounds","iLast","getVisible","obj1","obj2","applyExtend","object","property","prototype","apply"],"mappings":"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"}